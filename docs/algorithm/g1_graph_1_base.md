---
title: å›¾-1-å›¾çš„åŸºç¡€
autoGroup-1: ğŸŒ±é˜¶æ®µä¸€ï¼šåˆå‡ºèŒ…åºğŸŒ±
---

# å›¾

## æ¦‚æ‹¬

1. ç”±ç‚¹çš„é›†åˆå’Œè¾¹çš„é›†åˆæ„æˆ

2. è™½ç„¶å­˜åœ¨æœ‰å‘å›¾å’Œæ— å‘å›¾çš„æ¦‚å¿µï¼Œä½†å®é™…ä¸Šéƒ½å¯ä»¥ç”¨æœ‰å‘å›¾æ¥è¡¨è¾¾

3. è¾¹å¯èƒ½å¸¦æœ‰æƒå€¼

   

éš¾ç‚¹

- ç®—æ³•çš„æ­¥éª¤ä¸éš¾ï¼Œéš¾çš„åœ°æ–¹åœ¨äºæ•°æ®ç»“æ„æ¯”è¾ƒå¤æ‚
- ç›¸åŒçš„é¢˜ç›®ç»å¸¸å‡ºç°ä¸åŒçš„æ•°æ®ç»“æ„æ¥è¡¨è¾¾ï¼Œæ‰€ä»¥ä¸€ä¸ªç®—æ³•å¯èƒ½ä¸åŒé¢˜ç›®æœ‰ä¸åŒç‰ˆæœ¬ã€‚

> å›¾ç¤ºä¾‹

![](/advance_2_graph_1_base.assets/graph_base.drawio.png)



> å›¾-â€æ£®æ—â€œ-ç¤ºä¾‹

- â€æ£®æ—â€œï¼šå­˜åœ¨å¤šä¸ªå›¾ï¼Œå¤šä¸ªå›¾ä¹‹é—´æ²¡æœ‰é“¾æ¥

![](/advance_2_graph_1_base.assets/graph_base_shenlin.drawio-16856065266075.png)

> æ³¨æ„ï¼šå›¾ä¸äºŒå‰æ ‘çš„åŒºåˆ«ï¼Ÿ
>
> - äºŒå‰æ ‘ç‚¹ä¹‹é—´çš„è¿æ¥æœ‰ä¸¥æ ¼çš„å…³ç³»è¦æ±‚ï¼Œå¦‚ï¼šå­èŠ‚ç‚¹ä¸å¯ä»¥ä»è‡ªèº«å‡ºå‘è¿æ¥çˆ¶èŠ‚ç‚¹
> - å›¾çš„ä»»æ„ä¸¤ä¸ªç‚¹ä¹‹å‰éƒ½å¯ä»¥è¿æ¥



## æ— å‘å›¾

![](/advance_2_graph_1_base.assets/graph_base_shenlin.drawio-16856065266075.png)



ä»¥å½“å‰å›¾ä¸ºä¾‹å­ï¼Œä»»æ„è¿æ¥çš„ä¸¤ç‚¹ï¼Œä»è‡ªèº«å‡ºå‘ï¼Œéƒ½å¯ä»¥åˆ°è¿æ¥çš„ç‚¹ï¼Œæ²¡æœ‰æ–¹å‘çš„è¦æ±‚ï¼Œæ­¤æ—¶ä¸ºæ— å‘å›¾



## æœ‰å‘å›¾

![](/advance_2_graph_1_base.assets/graph_no_direct.drawio.png)



ä¸Šå›¾è¡¨ç¤ºæœ‰å‘å›¾ï¼Œ`ç‚¹1`å¯ä»¥åˆ°è¾¾`ç‚¹2`ï¼Œä½†æ˜¯`ç‚¹2`ä¸å¯ä»¥åˆ°è¾¾`ç‚¹1`



## ç»Ÿä¸€è¡¨ç¤º

![](/advance_2_graph_1_base.assets/graph_director_2_n.drawio.png)

æˆ‘ä»¬ä½¿ç”¨æœ‰å‘å›¾çš„è¡¨è¾¾æ–¹å¼ï¼Œåœ¨å•å‘çš„è¡¨è¾¾ä¸Šæ–°å¢ä¸€ä¸ªå›å»çš„æ–¹å‘ï¼Œæ­¤æ—¶ä¸æ— å‘å›¾çš„æœ¬è´¨ä¸€è‡´ã€‚

## å›¾çš„å¸¸ç”¨è¡¨è¾¾æ–¹å¼

- é‚»æ¥è¡¨æ³•
- é‚»æ¥çŸ©é˜µæ³•

![](/advance_2_graph_1_base.assets/graph_description.drawio.png)

### é‚»æ¥è¡¨æ³•

| å½“å‰ç‚¹ | é‚»æ¥ç‚¹(ç‚¹ï¼Œæƒé‡)  |
| ------ | ----------------- |
| A      | (Bï¼Œ6) ã€ (Eï¼Œ15) |
| B      | (D, 51)           |
| C      | æ—                 |
| D      | (C, 6)ã€(B, 40)   |
| E      | (D, 3)            |



### é‚»æ¥çŸ©é˜µæ³•

- æ¨ªçºµéƒ½ä¸ºç‚¹
- è¡¨æ ¼å†…å®¹ä¸ºç‚¹åˆ°ç‚¹çš„æƒé‡
- âˆ æ— ç©·è¡¨ç¤ºï¼Œä¸¤ç‚¹ä¹‹é—´ä¸ç›¸é‚»

|      | A    | B    | C    | D    | E    |
| ---- | ---- | ---- | ---- | ---- | ---- |
| A    | 0    | 6    | âˆ    | âˆ    | 15   |
| B    | âˆ    | 0    | âˆ    | 51   | âˆ    |
| C    | âˆ    | âˆ    | 0    | âˆ    | âˆ    |
| D    | âˆ    | 40   | 6    | 0    | âˆ    |
| E    | âˆ    | âˆ    | âˆ    | 3    | 0    |

## æ¨èæ•°æ®ç»“æ„

### ç‚¹

![](/advance_2_graph_1_base.assets/grap_point.drawio.png)

- å…¥åº¦ï¼šå¯ä»¥åˆ°å½“å‰ç‚¹çš„ç‚¹æ•°é‡
- å‡ºåº¦ï¼šå½“å‰ç‚¹å¯ä»¥åˆ°çš„ç‚¹çš„æ•°é‡
- ç›´æ¥ç›¸é‚»ç‚¹ï¼šå½“å‰ç‚¹å¯ä»¥åˆ°çš„ç‚¹ï¼Œåœ¨ä¸Šå›¾ä¸­åˆ™ä¸º Bã€F
- ä»¥å½“å‰ç‚¹ä¸ºå‡ºå‘ç‚¹çš„çº¿ï¼šåœ¨ä¸Šå›¾ä¸­ä¸ºAåˆ°Bã€Fçš„ä¸¤æ¡çº¿

```go
// ç‚¹çš„ç»“æ„ä½“
type Node struct {
	Val   int  // ç‚¹çš„åºå·ï¼Œå¯ä»¥æ˜¯æ•°å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ Aï¼Œæ ¹æ®å…·ä½“æƒ…å†µå®š
	In    int  // å…¥åº¦
	Out   int  // å‡ºåº¦
	Edges []*Edge // ä»¥å½“å‰ç‚¹ä¸ºå‡ºå‘ç‚¹çš„çº¿
	Nexts []*Node // ç›´æ¥ç›¸é‚»ç‚¹
}
```



### çº¿

![](/advance_2_graph_1_base.assets/graph_line.drawio.png)

- è‡ªèº«æƒé‡

- å‡ºå‘ç‚¹
- ç›®æ ‡ç‚¹

```go
// è¾¹çš„ç»“æ„ä½“
type Edge struct {
	Weight  int    // æƒé‡ï¼Œå¦‚å›¾åˆ™ä¸º 13
	From    *Node  // å‡ºå‘ç‚¹ï¼Œå¦‚å›¾åˆ™ä¸º B
	To      *Node  // ç›®æ ‡ç‚¹ï¼Œå¦‚å›¾åˆ™ä¸º F
}
```

### å›¾

- å›¾ç”±ç‚¹å’Œè¾¹æ„æˆ
- ç‚¹ä½¿ç”¨å”¯ä¸€ç¼–å· æ˜ å°„
- è¾¹é‡‡ç”¨é›†åˆçš„æ–¹å¼è¡¨ç¤º

```go
// å›¾çš„ç»“æ„ä½“
type Graph struct {
	Nodes map[int]*Node       // ç‚¹é›†
	Edges map[*Edge]struct{}  // è¾¹é›†
}
```



### æ•°æ®ç»“æ„è½¬æ¢

ç›®å‰æœ‰ä¸€å¼ å›¾ï¼Œå…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](/advance_2_graph_1_base.assets/graph_S.drawio.png)

è¦æ±‚ä½¿ç”¨æ·±åº¦ä¼˜å…ˆéå†ä¸å®½åº¦ä¼˜å…ˆéå†ï¼Œæ¥éå†è¿™å¼ å›¾ã€‚

ç›®å‰å›¾çš„æè¿°æ–¹å¼ä¸ºä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```go
	chart := [][]int{
        // ç¬¬ä¸€ä¸ªä½ç½®è¡¨ç¤ºæƒé‡ï¼Œ
        // ç¬¬äºŒä¸ªä½ç½®è¡¨ç¤ºå‡ºå‘ç‚¹çš„å€¼
        // ç¬¬ä¸‰ä¸ªä½ç½®è¡¨ç¤ºæŠµè¾¾ç‚¹çš„å€¼
		[]int{11, 1, 2},
		[]int{32, 1, 3}, 
		[]int{18, 1, 4}, 
		[]int{21, 2, 5},
		[]int{45, 2, 3},
		[]int{28, 3, 1},
		[]int{16, 3, 2},
		[]int{16, 3, 4},
		[]int{16, 3, 5},
	}
```

æ­¤æ—¶æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬ä¹‹å‰è¯´çš„æ•°æ®ç»“æ„ä½“ç”¨ä¸ä¸Šäº†ï¼Œé‚£ä¸ºä»€ä¹ˆè¦å®šå¥½ä¹‹å‰çš„æ•°æ®ç»“æ„å‘¢ï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ

ç­”ï¼šå¥½å¤„åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¨³å®šçš„æ•°æ®ç»“æ„å»å­¦ä¹ å›¾ç›¸å…³çš„ç®—æ³•ï¼Œå›¾ç›¸å…³çš„ç®—æ³•æ˜¯ä¸å˜çš„ï¼Œä½†æ˜¯å›¾çš„è¡¨è¾¾å½¢å¼åƒéä¸‡åŒ–ï¼Œæˆ‘ä»¬ä¸å¯èƒ½é’ˆå¯¹ä¸åŒçš„æ•°æ®ç»“æ„éƒ½å†™ä¸€è¾¹ç®—æ³•ã€‚

é‚£æˆ‘ä»¬æ€ä¹ˆä½¿ç”¨ä¹‹å‰çš„æ•°æ®ç»“æ„ä½“å‘¢ï¼Ÿ

ç­”ï¼šæˆ‘ä»¬åªéœ€è¦å¯¹ä¸åŒçš„æ•°æ®ç»“æ„ï¼Œå†™ä¸€ä¸ªæ•°æ®ç»“æ„è½¬æ¢çš„å‡½æ•°å³å¯ï¼Œå°†ä¸åŒçš„è¡¨è¾¾æ–¹å¼è½¬æ¢ä¸ºæˆ‘ä»¬ç†Ÿæ‚‰çš„æ•°æ®ç»“æ„ï¼Œå¹¶åœ¨æˆ‘ä»¬ç†Ÿæ‚‰çš„æ•°æ®ç»“æ„ä¸Šå®ç°ç®—æ³•ã€‚

ä»¥ä¸‹é’ˆå¯¹æœ¬æ¬¡ä¾‹å­çš„å›¾ï¼Œå†™ä¸€ä¸ªæ•°æ®ç»“æ„ä½“è½¬æ¢å‡½æ•°ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```go
func GenerateGraph(chart [][]int) Graph {
    // chart å›¾çš„äºŒç»´æ•°ç»„ï¼ŒåŸå§‹è¡¨è¾¾æ–¹å¼
    
    // åˆ›å»ºå›¾ï¼Œåˆå§‹åŒ–å›¾é›†ï¼Œä¸è¾¹é›†
	graph := Graph{map[int]*Node{}, map[*Edge]struct{}{}}
    
    // éå†åŸå§‹æ•°æ®ï¼Œå¹¶è¿›è¡Œæ•°æ®è½¬æ¢
	for _, v := range chart {
        
        // å–å‡ºæƒé‡
		weight := v[0]
        
        // æ‹¿åˆ°å‡ºå‘ç‚¹
		from := v[1]
        
        // æ‹¿åˆ°ç›®çš„ç‚¹
		to   := v[2]
        
        // å¦‚æœå›¾ä¸­çš„èŠ‚ç‚¹ä¸åŒ…å«ï¼Œå‡ºå‘èŠ‚ç‚¹ï¼Œåˆ™åˆ›å»ºèŠ‚ç‚¹ï¼ŒåŠ å…¥ç‚¹é›†
		if !Contains(graph.Nodes, from) {
			graph.Nodes[from] = &Node{Val:from}
		}
        
        // å¦‚æœå›¾ä¸­çš„èŠ‚ç‚¹ä¸åŒ…å«ç›®æ ‡ç‚¹ï¼Œåˆ™åˆ›å»ºèŠ‚ç‚¹ï¼ŒåŠ å…¥ç‚¹é›†
		if !Contains(graph.Nodes, to) {
			graph.Nodes[to] = &Node{Val:to}
		}
        
        // æ‹¿åˆ°å‡ºå‘ç‚¹
		fromN := graph.Nodes[from]
        // æ‹¿åˆ°ç›®æ ‡ç‚¹
		toN   := graph.Nodes[to]
        // åˆ›å»ºæ–°çš„è¾¹
		NewEdge := &Edge{weight, fromN, toN}
        
        // å‡ºå‘ç‚¹çš„å‡ºåº¦+1
		fromN.Out++
        // å‡ºå‘ç‚¹çš„ç›´æ¥é‚»ç‚¹æ·»åŠ å½“å‰ç›®æ ‡ç‚¹
		fromN.Nexts = append(fromN.Nexts, toN)
        // å‡ºå‘ç‚¹çš„ç›´æ¥é‚»è¾¹æ·»åŠ å½“å‰è¾¹
		fromN.Edges = append(fromN.Edges, NewEdge)
        
        // ç›®æ ‡ç‚¹çš„å…¥åº¦+1
		toN.In++
        
        // å›¾çš„è¾¹é›†åŠ å…¥å½“å‰è¾¹
		graph.Edges[NewEdge] = struct{}{}
	}
	return graph
}

func Contains(set map[int]*Node, node int)  (ok bool) {
	_, ok = set[node]
	return
}
```

### å®½åº¦ä¼˜å…ˆéå†

![](/advance_2_graph_1_base.assets/graph_bfs.drawio.png)

- åœ¨å›¾çš„å®½åº¦ä¼˜å…ˆéå†ä¸­ï¼ŒåŒä¸€ä¸ªèŠ‚ç‚¹çš„ç›´æ¥ç›¸é‚»èŠ‚ç‚¹ï¼Œä¹‹é—´çš„æ‰“å°é¡ºåºï¼Œæ²¡æœ‰è¦æ±‚
- åœ¨å®½åº¦ä¼˜å…ˆéå†ä¸­ï¼Œå…ˆæ‰“å°å½“å‰èŠ‚ç‚¹ï¼Œå¹¶å°†ç›¸é‚»èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ä¸­ï¼Œä»é˜Ÿåˆ—å–å‡ºèŠ‚ç‚¹æ‰“å°ï¼Œç„¶åç»§ç»­å°†å½“å‰èŠ‚ç‚¹çš„ç›¸é‚»èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ï¼Œä¸€ç›´å¾ªç¯çŸ¥é“é˜Ÿåˆ—ä¸ºç©º
- åœ¨å›¾çš„æ•°æ®ç»“æ„ä¸­ï¼Œä¸¤ä¸ªç‚¹æœ‰å¯èƒ½äº’ä¸ºç›´æ¥ç›¸é‚»èŠ‚ç‚¹ï¼Œæ‰€ä»¥éœ€è¦é¢„é˜²æ­»å¾ªç¯ï¼Œéœ€è¦åŠ å…¥setæ ‡è®°å·²ç»æ‰“å°è¿‡çš„ç‚¹

ä»¥ä¸‹ä¸ºå®½åº¦ä¼˜å…ˆéå†çš„`golang`ä»£ç ï¼š

```go
func GraphBFS(graph Graph){
    // graph æ˜¯æˆ‘ä»¬ç»è¿‡è½¬æ¢çš„å›¾
    
    // åˆ›å»ºé˜Ÿåˆ—
	queue := list.New()
    // å°†1å·èŠ‚ç‚¹æ”¾å…¥é˜Ÿåˆ—ä¸­
	queue.PushBack(graph.Nodes[1])
    // åˆ›å»ºsetæ ‡è®°åŠ å…¥è¿‡é˜Ÿåˆ—çš„èŠ‚ç‚¹
	nodeSet := map[*Node]struct{}{}
    // æ ‡è®°1å·å·²åŠ å…¥é˜Ÿåˆ—
	nodeSet[graph.Nodes[1]] = struct{}{}
	for queue.Len() > 0 {
        // ä»é˜Ÿåˆ—å–å‡ºèŠ‚ç‚¹
		node := queue.Remove(queue.Front()).(*Node)
        // æ‰“å°è¯¥èŠ‚ç‚¹
		fmt.Println(node.Val)
        // éå†ç›´æ¥ç›¸é‚»èŠ‚ç‚¹
		for _, next := range node.Nexts {
            // å¦‚æœè¯¥èŠ‚ç‚¹æ²¡æœ‰è¿›å…¥è¿‡é˜Ÿåˆ—ï¼Œåˆ™åŠ å…¥é˜Ÿåˆ—ï¼Œå¹¶åœ¨setä¸­æ ‡è®°è¯¥èŠ‚ç‚¹å·²è¿›å…¥é˜Ÿåˆ—
			if !Contains1(nodeSet, next) {
				queue.PushBack(next)
				nodeSet[next] = struct{}{}
			}
		}
	}
}

func Contains1(set map[*Node]struct{}, node *Node)  (ok bool) {
	_, ok = set[node]
	return
}
```



### æ·±åº¦ä¼˜å…ˆéå†

![](/advance_2_graph_1_base.assets/graph_dfs.drawio.png)

- æ·±åº¦ä¼˜å…ˆéå†ï¼Œä½¿ç”¨æ ˆç»“æ„è®°å½•æ²¿é€”çš„è·¯å¾„ï¼Œå¯¹äºéå†åˆ°çš„ä½ç½®ç›´æ¥æ‰“å°ï¼Œæ‰“å°ååŠ å…¥æ ˆä¸­ï¼Œå¹¶æ ‡è®°ã€‚
- å¾ªç¯ä»æ ˆä¸­å–å‡ºèŠ‚ç‚¹ï¼Œå¹¶éå†è¯¥èŠ‚ç‚¹çš„ç›´æ¥ç›¸é‚»èŠ‚ç‚¹ï¼Œéå†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°æœªè¿›å…¥è¿‡æ ˆä¸­çš„èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥æ‰“å°ï¼Œå¹¶åŠ å…¥æ ˆä¸­ï¼Œä¸”è·³å‡ºå½“å‰éå†
- ç»§ç»­å¾ªç¯ï¼Œä»¥ä¸Šæ­¥éª¤ï¼ŒçŸ¥é“æ ˆä¸ºç©ºï¼Œåˆ™éå†å®Œæ¯•

æ·±åº¦ä¼˜å…ˆéå†çš„ä»£ç å¦‚ä¸‹ï¼š

```go
func GraphDFS(graph Graph) {
    
    // set æ ‡è®°æ‰“å°è¿‡çš„èŠ‚ç‚¹
	nodeSet := map[*Node]struct{}{}
    // åˆ›å»ºæ ˆï¼Œè®°å½•æ·±åº¦éå†çš„è·¯å¾„
	stack := list.New()
    
    // æ‰“å°å½“å‰èŠ‚ç‚¹
	fmt.Println(graph.Nodes[1].Val)
    // æ ˆä¸­åŠ å…¥1å·èŠ‚ç‚¹
	stack.PushBack(graph.Nodes[1])
    // set æ ‡è®°åŠ å…¥è¿‡æ ˆçš„èŠ‚ç‚¹
	nodeSet[graph.Nodes[1]] = struct{}{}

	for stack.Len() > 0 { // æ ˆä¸ä¸ºç©ºä»£è¡¨æ²¡æœ‰éå†å®Œ
        
        // å–å‡ºæ ˆé¡¶èŠ‚ç‚¹
		node := stack.Remove(stack.Back()).(*Node)
        
        // éå†æ ˆé¡¶èŠ‚ç‚¹ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹å­˜åœ¨ï¼Œåˆ™éå†ç›´æ¥ç›¸é‚»èŠ‚ç‚¹
		for _, next := range node.Nexts {
            // å¦‚æœç›´æ¥ç›¸é‚»èŠ‚ç‚¹å·²ç»æ‰“å°è¿‡äº†ï¼Œåˆ™ç›´æ¥è·³è¿‡
			if !Contains1(nodeSet, next) {
                // æ²¡æœ‰æ‰“å°è¿‡ï¼Œåˆ™æ‰“å°
                fmt.Println(next.Val)
                // åŠ å…¥setæ ‡è®°å·²æ‰“å°
                nodeSet[next] = struct{}{}
				// éå†è·¯å¾„æ¢å¤ï¼Œå¹¶é€€å‡º
				stack.PushBack(node)
				stack.PushBack(next)
				break
			}
		}
	}
}
```











