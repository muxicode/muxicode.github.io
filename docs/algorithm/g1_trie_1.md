---
title: å‰ç¼€æ ‘
autoGroup-1: ğŸŒ±é˜¶æ®µä¸€ï¼šåˆå‡ºèŒ…åºğŸŒ±
---
# ğŸŒ³ å‰ç¼€æ ‘ğŸŒ

**å‰ç¼€æ ‘ï¼ˆTrieï¼‰** æ˜¯ä¸€ç§ä¸“é—¨ä¸ºå­—ç¬¦ä¸²é›†åˆè®¾è®¡çš„æ ‘å½¢æ•°æ®ç»“æ„ã€‚å®ƒä»¥å…¶ç‹¬ç‰¹çš„ç»“æ„å’Œå¼ºå¤§çš„åŠŸèƒ½ï¼Œåœ¨ç¼–ç¨‹æ£®æ—ä¸­ç‹¬é¢†é£éªšã€‚

**åŠŸèƒ½ï¼š**

1. ğŸ§ **é«˜æ•ˆå­˜å‚¨å­—ç¬¦ä¸²é›†åˆï¼š**
   - å‰ç¼€æ ‘èƒ½å¤Ÿé«˜æ•ˆåœ°å­˜å‚¨å¤§é‡çš„å­—ç¬¦ä¸²ï¼Œä»¥æ ‘çš„å½¢å¼å±•ç°æ¯ä¸ªå­—ç¬¦ä¸²çš„å‰ç¼€ã€‚
   - æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­—ç¬¦ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°æŸä¸ªèŠ‚ç‚¹çš„è·¯å¾„è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

2. ğŸš€ **å¿«é€ŸæŸ¥æ‰¾å’Œæ’å…¥ï¼š**
   - é€šè¿‡å‰ç¼€æ ‘ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€ŸæŸ¥æ‰¾æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­ï¼Œè€Œä¸éœ€è¦éå†æ•´ä¸ªé›†åˆã€‚
   - æ’å…¥æ–°å­—ç¬¦ä¸²ä¹Ÿæ˜¯é«˜æ•ˆçš„ï¼Œåªéœ€æ²¿ç€æ ‘ä¸€æ­¥æ­¥æ‰©å±•å³å¯ã€‚

3. ğŸ”„ **å‰ç¼€åŒ¹é…å’Œæœç´¢æç¤ºï¼š**
   - å‰ç¼€æ ‘çš„ä¸€ä¸ªæ˜¾è‘—ç‰¹ç‚¹æ˜¯æ”¯æŒé«˜æ•ˆçš„å‰ç¼€åŒ¹é…ã€‚å¯ä»¥è½»æ¾æ‰¾åˆ°æ‰€æœ‰ä»¥æŸä¸ªå‰ç¼€å¼€å¤´çš„å­—ç¬¦ä¸²ã€‚
   - è¿™ä½¿å¾—å‰ç¼€æ ‘åœ¨æœç´¢å¼•æ“ã€æ‹¼å†™æ£€æŸ¥å’Œè‡ªåŠ¨è¡¥å…¨ç­‰åº”ç”¨ä¸­å¤§æ˜¾èº«æ‰‹ã€‚

**åº”ç”¨ï¼š**

1. ğŸ“š **å­—å…¸å’Œæ‹¼å†™æ£€æŸ¥ï¼š**
   - å‰ç¼€æ ‘è¢«å¹¿æ³›åº”ç”¨äºå­—å…¸å’Œæ‹¼å†™æ£€æŸ¥ç³»ç»Ÿä¸­ï¼Œç”¨äºå¿«é€Ÿæ£€ç´¢å’Œçº æ­£æ‹¼å†™é”™è¯¯ã€‚

2. ğŸ“– **æœç´¢å¼•æ“ï¼š**
   - åœ¨æœç´¢å¼•æ“ä¸­ï¼Œå‰ç¼€æ ‘è¢«ç”¨äºé«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢å¤§é‡çš„ç½‘é¡µæˆ–æ–‡æ¡£ã€‚

3. ğŸ“± **è‡ªåŠ¨è¡¥å…¨ï¼š**
   - è®¸å¤šæ–‡æœ¬ç¼–è¾‘å™¨å’Œè¾“å…¥æ¡†ä¸­ä½¿ç”¨å‰ç¼€æ ‘æ¥å®ç°å¿«é€Ÿçš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ã€‚

4. ğŸ—ƒï¸ **æ–‡ä»¶ç³»ç»Ÿå’Œè·¯ç”±è¡¨ï¼š**
   - å‰ç¼€æ ‘åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­è¢«ç”¨äºå®ç°é«˜æ•ˆçš„è·¯å¾„æ£€ç´¢ï¼ŒåŒæ—¶åœ¨è·¯ç”±è¡¨ä¸­ä¹Ÿæœ‰å¹¿æ³›çš„åº”ç”¨ã€‚

åœ¨ç¼–ç¨‹çš„å¤§æ£®æ—ä¸­ï¼Œå‰ç¼€æ ‘å¦‚åŒä¸€é¢—ç¥å¥‡çš„æ ‘æœ¨ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†é«˜æ•ˆè€Œå¼ºå¤§çš„å­—ç¬¦ä¸²å¤„ç†èƒ½åŠ›ã€‚æ— è®ºæ˜¯æ–‡å­—æœç´¢è¿˜æ˜¯è‡ªåŠ¨è¡¥å…¨ï¼Œå‰ç¼€æ ‘éƒ½æ˜¯ç¼–ç¨‹æ£®æ—ä¸­ä¸å¯æˆ–ç¼ºçš„ç¥å¥‡å·¥å…·ï¼ğŸŒ²âœ¨

## ç¤ºä¾‹

![](/g1_trie_1.assets/trie_1.drawio.png)



ğŸŒ³ **æç»˜ç¼–ç¨‹æ£®æ—ï¼šå­—ç¬¦ä¸²èŠ‚ç‚¹æ ‘çš„å¥‡å¦™æ„å»º** ğŸŒŸ

æˆ‘ä»¬èƒ½å¤Ÿå°†æ•°ç»„ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²å·§å¦™åœ°æ„å»ºæˆä¸€é¢—å¦‚ä¸Šå›¾æ‰€ç¤ºçš„èŠ‚ç‚¹æ ‘ï¼Œå…¶ä¸­è•´å«ç€ä¸°å¯Œçš„èŠ‚ç‚¹å’Œè·¯å¾„ã€‚

**èŠ‚ç‚¹æ ‘çš„æ„æˆï¼š**

- `pass` å±æ€§ï¼šæ ‡è®°å½“å‰è·¯å¾„ä¸Šç»è¿‡çš„å­—ç¬¦ä¸²æ•°é‡ã€‚
- `end` å±æ€§ï¼šæ ‡è®°ä»¥å½“å‰è·¯å¾„ç»“å°¾çš„å­—ç¬¦ä¸²æ•°é‡ã€‚
- è·¯å¾„ï¼šå³å­—ç¬¦ä¸²çš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œé€ä¸€æ„æˆæ ‘çš„è·¯å¾„ã€‚

**é€šè¿‡è¿™æ ·çš„æ ‘æ„å»ºï¼Œæˆ‘ä»¬èƒ½å¤Ÿè¿…é€Ÿå›ç­”ä»¥ä¸‹é—®é¢˜ï¼š**

- **å­—ç¬¦æ˜¯å¦åœ¨æ•°ç»„ä¸­å‡ºç°è¿‡ï¼Ÿ**
  - é€šè¿‡æ£€æŸ¥æ ‘ä¸­æ˜¯å¦å­˜åœ¨å½“å‰å­—ç¬¦ä¸²çš„è·¯å¾„ï¼Œè‹¥èŠ‚ç‚¹çš„ `end` ä¸ç­‰äº0ï¼Œåˆ™è¡¨ç¤ºå­—ç¬¦å‡ºç°è¿‡ã€‚

- **å‡ºç°äº†å‡ æ¬¡ï¼Ÿ**
  - ä»ç„¶åœ¨æ ‘ä¸­æŸ¥çœ‹å½“å‰å­—ç¬¦ä¸²çš„è·¯å¾„ï¼Œæ­¤æ—¶èŠ‚ç‚¹çš„ `end` å±æ€§çš„æ•°é‡å°±æ˜¯å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚

- **æŸä¸€æ®µå­—ç¬¦ä¸²å‰ç¼€å‡ºç°è¿‡å¤šå°‘æ¬¡ï¼Ÿ**
  - æŸ¥çœ‹æ ‘æ˜¯å¦åŒ…å«è¯¥å­—ç¬¦ä¸²å‰ç¼€ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™é€šè¿‡èŠ‚ç‚¹çš„ `pass` å±æ€§å¾—çŸ¥è¯¥å­—ç¬¦ä¸²å‰ç¼€çš„å‡ºç°æ¬¡æ•°ã€‚

## ä»£ç å®ç°

> ä½¿ç”¨ç¤ºä¾‹

```go
package trietree

import (
	"fmt"
	"testing"
)

func TestTrie(t *testing.T) {
	trieTree := NewTrieTree()
	trieTree.Insert("abc")
	trieTree.Insert("abcd")
	trieTree.Insert("abcde")
	trieTree.Insert("abcdef")
	trieTree.Insert("abcdefg")
	fmt.Println(trieTree.Search("abc"))
	trieTree.Delete("abc")
	fmt.Println(trieTree.Search("abc"))
	fmt.Println(trieTree.Prefix("abcdef"))
}
```

> å…·ä½“å®ç°

```go
package trietree

func NewTrieTree() *TrieTree {
	// ä»…ç”¨äºè‹±æ–‡
	return &TrieTree{root: &Node{pass:0, end:0, next: make([]*Node, 26)}}
}

type TrieTree struct {
	root *Node
}

type Node struct {
	pass int
	end int
	next []*Node
	// next map[string]*Node æ•°æ®æ¯”è¾ƒå¤æ‚çš„æ—¶å€™ï¼Œä½¿ç”¨è¯¥ç»“æ„
}

func (t *TrieTree) Insert(str string) {
	if str == "" {  // é˜²æ­¢ç©ºå­—ç¬¦è¿›å…¥
		return
	}
	cur := t.root  // ä»æ ¹èŠ‚ç‚¹å‡ºå‘
	cur.pass++     // åŠ å…¥çš„å­—ç¬¦ä¸€å®šä¸ä¸ºç©ºï¼Œæ ¹èŠ‚ç‚¹ç»è¿‡çš„è·¯å¾„ä¸€å®šåŠ ä¸€
	var path int   // è¡¨ç¤ºè·¯å¾„
	for _, v := range str { // éå†è·¯å¾„
		path = int(v-'a') // è®¡ç®—å®é™…çš„è·¯å¾„
		if cur.next[path] == nil { // ä¸å­˜åœ¨è·¯å¾„åˆ™åˆ›å»ºèŠ‚ç‚¹
			cur.next[path] = &Node{pass:0, end:0, next: make([]*Node, 26)}
		}
		cur = cur.next[path] // èµ°è¿‡å½“å‰è·¯å¾„
		cur.pass++           // èµ°è¿‡çš„è·¯å¾„çš„pass+1
	}
	cur.end++
}

func (t *TrieTree) Search(str string) int {
	cur := t.root // ä»æ ¹èŠ‚ç‚¹å‡ºå‘
	for _, v := range str {
		if cur.next[v-'a'] == nil { // ä¸å­˜åœ¨è·¯å¾„æ—¶ç›´æ¥è¿”å› 0 ä¸ª
			return 0
		}
		cur = cur.next[v-'a']
	}
	return cur.end // è¿”å›ç»è¿‡è·¯å¾„çš„ç»“æŸæ•°é‡
}

func (t *TrieTree) Delete(str string) {
	if t.Search(str) != 0 { // å­˜åœ¨è¯¥èŠ‚ç‚¹æ—¶æ‰éœ€è¦åˆ é™¤
		cur := t.root
		for _, v := range str {
			if cur.next[v-'a'].pass == 1 { // è¯¥è·¯å¾„åç»­ä¹‹åå”¯ä¸€ä¸€æ¡è·¯å¾„æ—¶ï¼Œç›´æ¥å°†æ•´æ¡è·¯å¾„åˆ é™¤, å¹¶è¿”å›
				cur.next[v-'a'] = nil
				return
			}
			cur = cur.next[v-'a']
			cur.pass--
		}
		cur.end--
	}
}

func (t *TrieTree) Prefix(str string) int {
	if str == "" {
		return 0
	}
	cur := t.root
	for _, v := range str {
		if cur.next[v -'a'] == nil {
			return 0
		}
		cur = cur.next[v -'a']
	}
	return cur.pass
}
```