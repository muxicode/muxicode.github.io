---
title: å›¾-2-å›¾çš„æ‹“æ‰‘æ’åº
autoGroup-1: ğŸŒ±é˜¶æ®µä¸€ï¼šåˆå‡ºèŒ…åºğŸŒ±
---

# å›¾çš„æ‹“æ‰‘æ’åºç®—æ³•

1. åœ¨å›¾ä¸­æ‰¾åˆ°æ‰€æœ‰å…¥åº¦ä¸º0çš„ç‚¹è¾“å‡º
2. æŠŠæ‰€æœ‰å…¥åº¦ä¸º0çš„ç‚¹åœ¨å›¾ä¸­åˆ æ‰ï¼Œç»§ç»­æ‰¾å…¥åº¦ä¸º0çš„ç‚¹è¾“å‡ºï¼Œå‘¨è€Œå¤å§‹
3. å›¾çš„æ‰€æœ‰ç‚¹éƒ½è¢«åˆ é™¤åï¼Œä¾æ¬¡è¾“å‡ºçš„é¡ºåºå°±æ˜¯æ‹“æ‰‘æ’åº

è¦æ±‚ï¼šæœ‰å‘å›¾ä¸”å…¶ä¸­æ²¡æœ‰ç¯

åº”ç”¨ï¼šäº‹ä»¶å®‰æ’ï¼Œç¼–è¯‘é¡ºåº

## ç®—æ³•ç¤ºä¾‹

![](/advance_2_graph_2_topology.assets/graph_topology.drawio.png)

æ‹“æ‰‘æ’åºè¾“å‡ºé¡ºåºï¼š A -> B -> C -> D -> F

- å…ˆæ‰¾åˆ°å…¥åº¦ä¸º`0`çš„ç‚¹`A`,è¾“å‡ºå¹¶åˆ é™¤ç‚¹`A`
- æ­¤æ—¶`ç‚¹B`çš„å…¥åº¦ä¸º`0`,è¾“å‡º`ç‚¹B`ï¼Œå¹¶åˆ é™¤`ç‚¹B`
- ä»¥æ­¤ç±»æ¨ï¼Œä¾æ¬¡å°†ç»“æœè¾“å‡º



å›¾çš„æ–¹å‘å¯ä»¥ç†è§£ä¸ºä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚ï¼šä¸ºä»€ä¹ˆå…ˆè¾“å‡º`ç‚¹B`å†è¾“å‡º`ç‚¹C`ï¼Ÿ

ä¾ç…§å›¾ä¸­ï¼Œå¯ä»¥ç†è§£ä¸ºï¼Œ`ç‚¹c`è¾“å‡ºéœ€è¦å…·å¤‡ `ç‚¹A`ä¸`ç‚¹B`éƒ½å·²ç»è¾“å‡ºåï¼Œæ‰å…·å¤‡è¾“å‡ºæ¡ä»¶ã€‚

## å¸¸ç”¨åœºæ™¯

- åšäº‹æƒ…çš„æœ‰å…ˆåé¡ºåºä¸”éœ€è¦å…·å¤‡æ¡ä»¶çš„æƒ…å†µ

- ä»£ç ç¼–è¯‘

  ![](/advance_2_graph_2_topology.assets/graph_topology_import.drawio.png)



## ä»£ç 

```go
func TopologicalSort(graph Graph) []int {
	// ç»“æœæ•°ç»„
	ans := []int{}
	// è®°å½•èŠ‚ç‚¹çš„å…¥åº¦çš„map
	nodeInMap := map[*Node]int{}
	// å…¥åº¦ä¸º0çš„èŠ‚ç‚¹æ‰å¯ä»¥è¿›å…¥é˜Ÿåˆ—
	zeroInQueue := list.New()
	// éå†å›¾ä¸­ï¼Œç‚¹é›†ï¼Œå¹¶å°†å…¥åº¦ä¸º0çš„ç‚¹æ”¾å…¥é˜Ÿåˆ—
	for _, v := range graph.Nodes {
		nodeInMap[v] = v.In
		if v.In == 0 {
			zeroInQueue.PushBack(v)
		}
	}

	// å…¥åº¦ä¸º0çš„é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ï¼Œç»“æœå°±æ²¡æœ‰æœé›†å®Œæ¯•
	for zeroInQueue.Len() > 0 {
		// å–å‡ºå…¥åº¦ä¸º0çš„ä¸€ä¸ªç‚¹
		node := zeroInQueue.Remove(zeroInQueue.Front()).(*Node)
		// åŠ å…¥ç»“æœé›†
		ans = append(ans, node.Val)

		// æ¶ˆé™¤æœé›†ç‚¹çš„å½±å“ï¼Œå°†è¯¥ç‚¹çš„ç›´æ¥ç›¸é‚»èŠ‚ç‚¹çš„å…¥åº¦å‡1ï¼Œå¦‚æœå…¥åº¦å‡å®Œåä¸º0ï¼Œåˆ™æ”¾å…¥é˜Ÿåˆ—
		for _, next := range node.Nexts {
			nodeInMap[next]--
			if nodeInMap[next] == 0 {
				zeroInQueue.PushBack(next)
			}
		}
	}
	return ans
}
```

æµ‹è¯•ç”¨ä¾‹ï¼š

```go
func TestTopologicalSort (t *testing.T) {
	chart := [][]int{
		[]int{0, 1, 7}, // ç¬¬ä¸€ä¸ªä½ç½®è¡¨ç¤ºæƒé‡ï¼Œ
		[]int{0, 2, 1}, // ç¬¬äºŒä¸ªä½ç½®è¡¨ç¤ºå‡ºå‘ç‚¹çš„å€¼
		[]int{0, 2, 4}, // ç¬¬ä¸‰ä¸ªä½ç½®è¡¨ç¤ºæŠµè¾¾ç‚¹çš„å€¼
		[]int{0, 3, 6},
		[]int{0, 3, 7},
		[]int{0, 4, 5},
		[]int{0, 4, 6},
	}
	graph := GenerateGraph(chart) // è½¬æ¢å‡½æ•°å‚è€ƒå›¾åŸºç¡€
	fmt.Println(TopologicalSort(graph))
}
```

