---
title: å›¾-3-æœ€å°ç”Ÿæˆæ ‘Kruskal
autoGroup-1: ğŸŒ±é˜¶æ®µä¸€ï¼šåˆå‡ºèŒ…åºğŸŒ±
---

# æœ€å°ç”Ÿæˆæ ‘Kruskal

![](/advance_2_graph_3_kruskal.assets/graph_kruskal.drawio.png)

> æœ‰å‘å›¾ä¸æ— å‘å›¾ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æœ€å°ç”Ÿæˆæ ‘çš„ç®—æ³•ï¼Œä»¥ä¸‹ä½¿ç”¨æ— å‘å›¾åšç¤ºä¾‹

æœ€å°ç”Ÿæˆæ ‘é—®é¢˜å°±æ˜¯ï¼š

- ä»¥æœ€å°çš„ä»£ä»·å°†å›¾ä¸­çš„èŠ‚ç‚¹éƒ½è”é€šï¼Œæ±‚å‡ºæ­¤æ—¶çš„æƒé‡ï¼Œæˆ–è€…è”é€šèŠ‚ç‚¹çš„è¾¹çš„é›†åˆã€‚
- æˆ–è€…è¯´æ˜¯å†ä¸ç ´åè”é€šæ€§çš„æ¡ä»¶ä¸‹ï¼Œå¯ä»¥åˆ é™¤ä¸€äº›å¤šä½™çš„è¾¹ï¼Œä¿è¯åˆ é™¤å¤šä½™çš„è¾¹åï¼Œæƒé‡æœ€å°ã€‚

## ç®—æ³•æµç¨‹

1. å°†è¾¹æŒ‰æƒé‡ä»å°åˆ°å¤§æ’åº

   ![](/advance_2_graph_3_kruskal.assets/graph_kruskal_step1.drawio.png)

2. ä»å°åˆ°å¤§éå†æ¯æ¡è¾¹ï¼Œå¹¶åˆ¤æ–­è¾¹çš„ä¸¤è¾¹çš„ç‚¹æ˜¯å¦å·²ç»è¿é€šï¼Œå¦‚æœæœªè¿é€šåˆ™é€‰æ‹©è¯¥è¾¹åŠ å…¥ç»“æœé›†ï¼Œå¦‚æœå·²ç»è¿é€šåˆ™æ”¾å¼ƒè¯¥è¾¹ã€‚

   ![](/advance_2_graph_3_kruskal.assets/graph_kruskal_step2.drawio.png)

   éå†æœ€å°æƒå€¼è¾¹1æ—¶ï¼Œä¸¤è¾¹çš„ `Aç‚¹`ä¸`Bç‚¹`æ­¤æ—¶å¹¶æœªè¿é€šï¼Œæ‰€ä»¥é€‰æ‹©è¯¥è¾¹ï¼Œæ­¤æ—¶ `Aç‚¹`ä¸`Bç‚¹`è¿é€šï¼ŒåŠ å…¥è¿é€šåŒºï¼Œ`è¾¹1`åŠ å…¥ç»“æœé›†ï¼Œå¦‚ä¸‹ï¼š

   ![](/advance_2_graph_3_kruskal.assets/graph_kruskal-step3.drawio.png)

3. ç»§ç»­éå†ä¸‹ä¸€å°çš„è¾¹ï¼Œå¹¶åˆ¤æ–­ï¼Œè¾¹ä¸¤å¤´çš„ç‚¹æ˜¯å¦è¿é€šï¼Œå¦‚æœæœªè¿é€šåˆ™é€‰æ‹©è¯¥è¾¹åŠ å…¥ç»“æœé›†ï¼Œå¦‚æœå·²ç»è¿é€šåˆ™æ”¾å¼ƒè¯¥è¾¹ã€‚

   ![](/advance_2_graph_3_kruskal.assets/graph_kruskal_step4.drawio.png)

   æ­¤æ—¶éå†åˆ°è¾¹2æ—¶ï¼Œä¸¤è¾¹çš„ `Bç‚¹`ä¸`Dç‚¹`æ­¤æ—¶å¹¶æœªè¿é€šï¼Œæ‰€ä»¥é€‰æ‹©è¯¥è¾¹ï¼Œæ­¤æ—¶ `Bç‚¹`ä¸`Dç‚¹`è¿é€šï¼ŒåŠ å…¥è¿é€šåŒºï¼Œ`è¾¹2`åŠ å…¥ç»“æœé›†å¦‚ä¸‹ï¼š

   ![](/advance_2_graph_3_kruskal.assets/graph_kruskal_step5.drawio.png)

4.  `è¾¹3`ä¸`è¾¹4`éå†è¿‡ç¨‹é‡å¤ä»¥ä¸Šæ“ä½œï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

   ![](/advance_2_graph_3_kruskal.assets/graph_kruskal_step6.drawio.png)

5. ç»§ç»­éå†ï¼Œéå†åˆ°`è¾¹50`ï¼Œæ­¤æ—¶ï¼Œ`Cç‚¹`ä¸`Fç‚¹`ï¼Œå·²ç»æœ‰ç”±`è¾¹3`ï¼Œ`è¾¹1`ï¼Œ`è¾¹2`ï¼Œ`è¾¹4`è¿é€šåœ¨ä¸€èµ·ï¼Œæ‰€ä»¥**æ”¾å¼ƒ**`è¾¹50`ï¼Œç»“æœé›†ä¸å˜ã€‚

   ![](/advance_2_graph_3_kruskal.assets/graph_kruskal_step7.drawio.png)

6. ç»§ç»­éå†ï¼Œéå†åˆ°`è¾¹100`ï¼Œæ­¤æ—¶ï¼Œ`Cç‚¹`ä¸`Bç‚¹`ï¼Œå·²ç»æœ‰ç”±`è¾¹3`ï¼Œ`è¾¹1`è¿é€šåœ¨ä¸€èµ·ï¼Œæ‰€ä»¥**æ”¾å¼ƒ**`è¾¹100`ï¼Œç»“æœé›†ä¸å˜ã€‚è‡ªæ­¤ï¼Œæˆ‘ä»¬éå†å®Œæ‰€æœ‰çš„è¾¹ï¼Œæ”¶é›†åˆ°ç»“æœé›†ï¼Œæœ€å°æƒé‡å³ä¸ºç»“æœé›†çš„è¾¹çš„æƒé‡ç›¸åŠ ã€‚

   ![](/advance_2_graph_3_kruskal.assets/graph_kruskal_step8.drawio.png)

## ä»£ç å®ç°

- è¯¥ä»£ç ä¸­ä½¿ç”¨åŸºç¡€ç« èŠ‚ä¸­çš„[å¹¶æŸ¥é›†](/algorithm/base_8_union_set_1)ã€[å †](/algorithm/base_9_heap)ï¼Œè‹¥ä¸äº†è§£è¯¥å†…å®¹ï¼Œéœ€è¦å…ˆé˜…è¯»è¯¥ç« èŠ‚ã€‚

```go
/*
	å¹¶æŸ¥é›†ä¸å †çš„å®ç°ï¼Œéœ€è¦å‚è€ƒå¯¹åº”ç« èŠ‚ã€‚
*/
func KruskalMinSum(graph Graph) int {
	// åˆå§‹åŒ–ç»“æœæƒé‡
	var ans int

	// è·å–æ‰€æœ‰çš„ç‚¹ï¼Œä½¿ç”¨ç‚¹åˆ›å»ºå¹¶æŸ¥é›†
	nodeArr := []interface{}{}
	for _, node := range graph.Nodes {
		nodeArr = append(nodeArr, node)
	}
	// åˆå§‹åŒ–å¹¶æŸ¥é›†ï¼Œç”¨äºåˆ¤æ–­ä¸¤ç‚¹æ˜¯å¦è¿é€š
	nodeUnionSet := union_set.NewUnionSet(nodeArr)
	// åˆ›å»ºå°æ ¹å †ï¼Œä½¿éå†çš„è¾¹æœ‰åº
	smallHeap := heap.NewSmallHeap(len(graph.Edges))
	for edge, _ := range graph.Edges {
		smallHeap.Push(edge)
	}
	// ä»å°åˆ°å¤§éå†æ‰€æœ‰çš„è¾¹
	for smallHeap.Size() > 0 {
		edge := smallHeap.Pop().(*Edge)
		if !nodeUnionSet.IsSameSet(edge.From, edge.To) {
			// å¦‚æœè¾¹ä¸¤å¤´çš„ç‚¹ä¸åœ¨åŒä¸€ä¸ªé›†åˆï¼Œé€‰æ‹©è¯¥è¾¹ï¼ŒåŠ ä¸Šè¯¥è¾¹çš„æƒé‡
			ans += edge.Weight
			// é€‰æ‹©è¾¹åï¼Œéœ€è¦å°†ä¸¤ä¸ªç‚¹è¿é€š
			nodeUnionSet.Union(edge.From, edge.To)
		}
	}
	return ans
}
```

