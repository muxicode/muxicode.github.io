(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{380:function(s,a,t){"use strict";t.r(a);var e=t(14),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"é¡¹ç›®å®¹å™¨åŒ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é¡¹ç›®å®¹å™¨åŒ–"}},[s._v("#")]),s._v(" é¡¹ç›®å®¹å™¨åŒ–")]),s._v(" "),a("p",[s._v("æœåŠ¡å®¹å™¨åŒ–æ˜¯ä»€ä¹ˆï¼Ÿ")]),s._v(" "),a("p",[s._v("æœåŠ¡å®¹å™¨åŒ–æ˜¯ä¸€ç§å°†åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–é¡¹æ‰“åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­çš„æ–¹æ³• ğŸ’»ğŸ“¦ã€‚")]),s._v(" "),a("p",[s._v("è¿™ç§æ–¹æ³•çš„å¥½å¤„åŒ…æ‹¬ï¼š")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("âœ¨ æé«˜åº”ç”¨ç¨‹åºçš„å¯ç§»æ¤æ€§ã€å¯é æ€§å’Œå¯æ‰©å±•æ€§")])]),s._v(" "),a("li",[a("p",[s._v("ğŸ’° é™ä½éƒ¨ç½²å’Œç»´æŠ¤æˆæœ¬")])])]),s._v(" "),a("p",[s._v("å®¹å™¨åŒ–çš„å¥½å¤„ä¸ä»…å±€é™äºè¿™äº›ï¼Œè¿˜åŒ…æ‹¬ï¼š")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("ğŸš€ åŠ å¿«æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²åº”ç”¨ç¨‹åºçš„é€Ÿåº¦")])]),s._v(" "),a("li",[a("p",[s._v("ğŸ‘¨â€ğŸ’» æ›´è½»æ¾åœ°ç®¡ç†å’Œç»´æŠ¤åŸºç¡€æ¶æ„")])])]),s._v(" "),a("p",[s._v("å› æ­¤ï¼ŒæœåŠ¡å®¹å™¨åŒ–æ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„æŠ€æœ¯ ğŸ’ªï¼Œå®ƒå¯ä»¥ä½¿å¼€å‘äººå‘˜å’Œ IT è¿è¥äººå‘˜æ›´åŠ è½»æ¾åœ°å·¥ä½œã€‚")]),s._v(" "),a("h2",{attrs:{id:"å®¹å™¨åŒ–ç›®å½•è®¾ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®¹å™¨åŒ–ç›®å½•è®¾ç½®"}},[s._v("#")]),s._v(" å®¹å™¨åŒ–ç›®å½•è®¾ç½®")]),s._v(" "),a("p",[s._v("å½“å‰ä»¥pythonçš„é¡¹ç›®ä¸ºä¾‹ä¹‹ä½œä¸ºç¤ºä¾‹ï¼Œå½“ç„¶å…¶ä»–è¯­è¨€ä¹Ÿå¯ä»¥æ ¹æ®å†…å®¹çš„åŸç†è¿›è¡Œæ”¹é€ æˆé€‚é…è‡ªå·±ä½¿ç”¨çš„å®¹å™¨åŒ–æ–¹æ¡ˆã€‚")]),s._v(" "),a("p",[s._v("æŒ‰ç…§ä¸‹å›¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ·»åŠ Dockerfileã€DockerCommit.shæ–‡ä»¶")]),s._v(" "),a("p",[a("img",{attrs:{src:"/1_docker_built_project.assets/%E6%9C%8D%E5%8A%A1%E5%AE%B9%E5%99%A8%E5%8C%96.drawio.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[s._v("#")]),s._v(" Dockerfile")]),s._v(" "),a("blockquote",[a("p",[s._v("è¯¥æ–‡ä»¶ä¸ºDockerCommit.shä¸­docker buildå‘½ä»¤çš„ä¾èµ–ï¼Œå½“æ‰§è¡Œdocker builæ˜¯ï¼Œé»˜è®¤ä½¿ç”¨DockerfileæŒ‡å®šçš„å†…å®¹åŠæ­¥éª¤å»æ„å»ºä¸€ä¸ªé•œåƒ")])]),s._v(" "),a("p",[s._v("é€šè¿‡Dockerfileæ„å»ºé•œåƒï¼š")]),s._v(" "),a("p",[s._v("æ–‡ä»¶åï¼šDockerfile")]),s._v(" "),a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# <é•œåƒåç§°> ä½¿ç”¨çš„åŸºç¡€é•œåƒåç§°")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" <é•œåƒåç§°>")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä½œè€…åç§°")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MAINTAINER")]),s._v(" <author>")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®¾ç½®å·¥ä½œç›®å½•")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /app")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å°†å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ° /app ç›®å½•ä¸‹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" . /app")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å°†å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ° /app ç›®å½•ä¸‹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" <port>")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¯åŠ¨å®¹å™¨åï¼Œåœ¨å®¹å™¨å†…éƒ¨æ‰§è¡Œ â€œ/bin/shâ€ å³åç»­å‘½ä»¤ä½¿ç”¨shellå‘½ä»¤è¡Œè§£é‡Šå™¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" /bin/sh")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"dockercommit-sh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockercommit-sh"}},[s._v("#")]),s._v(" DockerCommit.sh")]),s._v(" "),a("blockquote",[a("p",[s._v("è¯¥æ–‡ä»¶å°†æ‰“åŒ…dockeré•œåƒï¼Œä»¥åŠæ¨é€é•œåƒçš„æ­¥éª¤ï¼Œé€šè¿‡shellè„šæœ¬åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶ï¼Œç®€åŒ–æ­¥éª¤")])]),s._v(" "),a("p",[s._v("æ–‡ä»¶åï¼šDockerCommit.shï¼Œå®è´¨æ˜¯ä¸€ä¸ªshellè„šæœ¬ï¼š")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -eè¡¨ç¤ºåœ¨è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œåªè¦æœ‰ä»»ä½•ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå°±ç«‹å³é€€å‡ºæ•´ä¸ªè„šæœ¬ï¼›set -xè¡¨ç¤ºåœ¨æ‰§è¡Œè„šæœ¬æ—¶ï¼Œä¼šå°†æ‰§è¡Œçš„æ¯ä¸€è¡Œå‘½ä»¤åŠå…¶å‚æ•°éƒ½æ‰“å°å‡ºæ¥ï¼Œæ–¹ä¾¿è°ƒè¯•")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ex")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# <ip:port> å¡«å†™ç›®æ ‡ä»“å‚¨ï¼Œæ¯”å¦‚è‡ªå·±æ­å»ºçš„dockerä»“å‚¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DOCKER_REGISTRY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ip:port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è·å–ç‰ˆæœ¬å‚æ•°å¯ä¸ä¼ ï¼Œä¸ä¼ é»˜è®¤ç‰ˆæœ¬å·ä¸ºlatest,")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¼ å‚æ–¹å¼ç¤ºä¾‹ï¼š./DockerCommit.sh 1.0.1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-z")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" build "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-q")]),s._v(" --force-rm "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DOCKER_REGISTRY")]),s._v("/docker-name:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$version")]),s._v(" ./\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" push "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DOCKER_REGISTRY")]),s._v("/docker-name:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$version")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"å…·ä½“æ­¥éª¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…·ä½“æ­¥éª¤"}},[s._v("#")]),s._v(" å…·ä½“æ­¥éª¤")]),s._v(" "),a("p",[s._v("ä»£ç æ”¹å†™å®Œå¹¶æäº¤éªŒè¯åï¼Œæ‰§è¡Œ")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("./DockerCommit.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("versionId"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("éœ€è¦å°† versionId æ›¿æ¢ä¸ºè‡ªå·±é¡¹ç›®çš„ç‰ˆæœ¬å·")])]),s._v(" "),a("p",[s._v("æ‰§è¡Œå®Œæ¯•åï¼Œå³å¯æ„å»ºå¹¶æ¨é€é•œåƒè‡³ä»“å‚¨")]),s._v(" "),a("h2",{attrs:{id:"å®¹å™¨ç¼–æ’-ç®¡ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®¹å™¨ç¼–æ’-ç®¡ç†"}},[s._v("#")]),s._v(" å®¹å™¨ç¼–æ’&ç®¡ç†")]),s._v(" "),a("p",[s._v("é™¤äº†å®¹å™¨çš„æ„å»ºï¼Œæˆ‘ä»¬è¿˜éœ€è¦å…³æ³¨ï¼Œå®¹å™¨çš„ç¼–æ’ä¸ç®¡ç†ï¼Œå¹³æ—¶å·¥ä½œä¸­ä½¿ç”¨è¾ƒå¤šçš„æ˜¯rancherï¼Œä»¥ä¸‹å¯¹rancheråšä¸€ä¸ªä»‹ç»ã€‚")]),s._v(" "),a("p",[s._v("Rancheræ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å®¹å™¨ç®¡ç†å¹³å°ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹åŠŸèƒ½å’Œä¼˜ç‚¹ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("ğŸŒŸ "),a("strong",[s._v("å¤šäº‘æ”¯æŒ")]),s._v("ï¼šRancherå¯ä»¥åœ¨å¤šä¸ªäº‘å¹³å°ä¸Šéƒ¨ç½²å®¹å™¨åŒ–åº”ç”¨ç¨‹åºï¼Œå¦‚AWSã€Azureã€Google Cloudç­‰ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾åœ°åœ¨ä¸åŒçš„äº‘å¹³å°ä¹‹é—´è¿ç§»åº”ç”¨ç¨‹åºã€‚")]),s._v(" "),a("li",[s._v("ğŸŒŸ "),a("strong",[s._v("ç›´è§‚æ˜“ç”¨çš„ç•Œé¢")]),s._v("ï¼šRancheræä¾›äº†ç›´è§‚ã€æ˜“ç”¨çš„Webç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨å®ƒæ¥åˆ›å»ºã€éƒ¨ç½²ã€ç®¡ç†å®¹å™¨ã€é›†ç¾¤å’Œåº”ç”¨ç¨‹åºã€‚")]),s._v(" "),a("li",[s._v("ğŸŒŸ "),a("strong",[s._v("é«˜å¯ç”¨æ€§å’Œçµæ´»æ€§")]),s._v("ï¼šRancherå…·æœ‰é«˜å¯ç”¨æ€§å’Œçµæ´»æ€§ï¼Œå¯ä»¥è½»æ¾åœ°æ‰©å±•å’Œç®¡ç†Kubernetesé›†ç¾¤ï¼Œè‡ªåŠ¨ç®¡ç†å®¹å™¨çš„æ•…éšœæ¢å¤ï¼Œç¡®ä¿åº”ç”¨ç¨‹åºå§‹ç»ˆå¯ç”¨ã€‚")]),s._v(" "),a("li",[s._v("ğŸŒŸ "),a("strong",[s._v("å®‰å…¨æ€§")]),s._v("ï¼šRancheræä¾›äº†å¤šå±‚å®‰å…¨æªæ–½ï¼Œå¦‚ç½‘ç»œéš”ç¦»ã€è®¿é—®æ§åˆ¶å’Œå®¡è®¡æ—¥å¿—ç­‰ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·è½»æ¾ç®¡ç†å®¹å™¨çš„å®‰å…¨æ€§ã€‚")]),s._v(" "),a("li",[s._v("ğŸŒŸ "),a("strong",[s._v("æ—¥å¿—å’Œç›‘æ§")]),s._v("ï¼šRancheræä¾›äº†å†…ç½®çš„æ—¥å¿—å’Œç›‘æ§å·¥å…·ï¼Œç”¨æˆ·å¯ä»¥å®æ—¶ç›‘æ§å’Œç®¡ç†å®¹å™¨å’Œåº”ç”¨ç¨‹åºçš„æ€§èƒ½å’ŒçŠ¶æ€ã€‚")]),s._v(" "),a("li",[s._v("ğŸŒŸ "),a("strong",[s._v("å¤šç§ç¼–æ’å¹³å°æ”¯æŒ")]),s._v("ï¼šRancheræ”¯æŒå¤šç§ç¼–æ’å¹³å°ï¼Œå¦‚Kubernetesã€Docker Swarmã€Mesoså’ŒCattleç­‰ï¼Œä½¿ç”¨æˆ·å¯ä»¥é€‰æ‹©æœ€é€‚åˆä»–ä»¬çš„ç¼–æ’å¹³å°ã€‚")]),s._v(" "),a("li",[s._v("ğŸŒŸ "),a("strong",[s._v("è‡ªå®šä¹‰")]),s._v("ï¼šRancheræä¾›äº†è®¸å¤šè‡ªå®šä¹‰é€‰é¡¹ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šåˆ¶ä»–ä»¬çš„å®¹å™¨ç¯å¢ƒã€‚")])]),s._v(" "),a("p",[s._v("æ€»ä¹‹ï¼ŒRancheræ˜¯ä¸€ä¸ª"),a("strong",[s._v("åŠŸèƒ½å¼ºå¤§")]),s._v("ã€"),a("strong",[s._v("æ˜“ç”¨")]),s._v("å’Œ"),a("strong",[s._v("çµæ´»")]),s._v("çš„"),a("strong",[s._v("å®¹å™¨ç®¡ç†å¹³å°")]),s._v("ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´è½»æ¾åœ°æ„å»ºã€éƒ¨ç½²å’Œç®¡ç†å®¹å™¨åŒ–åº”ç”¨ç¨‹åºã€‚")])])}),[],!1,null,null,null);a.default=r.exports}}]);