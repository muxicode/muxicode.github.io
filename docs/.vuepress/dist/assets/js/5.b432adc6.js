(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{263:function(t,e,a){},285:function(t,e,a){"use strict";a(263)},296:function(t,e,a){"use strict";a.r(e);const n={name:"node-component",props:{nodeId:{type:String,required:!0},mindmapData:{type:Map,required:!0}},methods:{getNodeLevel(t,e=0){if("root"===t)return e;let a=null;return this.mindmapData.forEach((e,n)=>{e.children.includes(t)&&(a=n)}),a?this.getNodeLevel(a,e+1):e},handleExpand(t){t.stopPropagation(),this.$emit("toggle-node",this.nodeId)}},render(t){const e=this.mindmapData.get(this.nodeId);if(!e)return null;const a=e.children&&e.children.length>0,s={"mindmap-node":!0,["mindmap-node-level-"+this.getNodeLevel(this.nodeId)]:!0,"mindmap-leaf":!a,"mindmap-collapsed":a&&!e.expanded},i=a?t("span",{class:"mindmap-expander",on:{click:this.handleExpand}}):null,o=a?t("div",{class:"mindmap-node-children"},e.children.map(e=>t(n,{key:e,props:{nodeId:e,mindmapData:this.mindmapData},on:{"toggle-node":t=>this.$emit("toggle-node",t)}}))):null;return t("div",{class:s,attrs:{"data-id":this.nodeId}},[t("div",{class:"mindmap-node-content"},[e.text,i]),o])}};var s={name:"Mindmap",components:{"node-component":n},props:{data:{type:Array,required:!0,validator:t=>t.every(t=>Array.isArray(t)&&2===t.length&&"string"==typeof t[0]&&"object"==typeof t[1]&&"string"==typeof t[1].text&&Array.isArray(t[1].children))}},data:()=>({mindmapDataRef:null,isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0,currentX:0,currentY:0,scale:1,minScale:.5,maxScale:2,scaleStep:.1}),computed:{mindmapStyle(){return this.isDragging?{transform:`translate(${this.offsetX}px, ${this.offsetY}px) scale(${this.scale})`,transition:"none",cursor:"grabbing"}:{transform:`translate(${this.offsetX}px, ${this.offsetY}px) scale(${this.scale})`,transition:"transform 0.3s ease-out"}}},methods:{zoomIn(){const t=Math.min(this.scale+this.scaleStep,this.maxScale);t!==this.scale&&(this.scale=t)},zoomOut(){const t=Math.max(this.scale-this.scaleStep,this.minScale);t!==this.scale&&(this.scale=t)},initializeMindmap(){const t=new Map(this.data.map(([t,e])=>[t,{...e,expanded:!1,children:[...e.children]}]));this.mindmapDataRef=t},toggleNode(t){const e=this.mindmapDataRef.get(t);if(e&&e.children.length>0){const a={...e,expanded:!e.expanded},n=new Map(this.mindmapDataRef);n.set(t,a),this.mindmapDataRef=n}},startDrag(t){0===t.button&&(t.target.classList.contains("mindmap-expander")||(this.isDragging=!0,this.startX=t.clientX-this.offsetX,this.startY=t.clientY-this.offsetY,t.target.style.cursor="grabbing"))},onDrag(t){this.isDragging&&(t.preventDefault(),this.offsetX=t.clientX-this.startX,this.offsetY=t.clientY-this.startY)},stopDrag(t){this.isDragging&&(this.isDragging=!1,t.target.style.cursor="grab")}},created(){this.initializeMindmap()},watch:{data:{handler(){this.initializeMindmap()},deep:!0}}},i=(a(285),a(14)),o=Object(i.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mindmap-container"},[e("div",{staticClass:"zoom-controls"},[e("button",{staticClass:"zoom-btn",attrs:{title:"放大"},on:{click:t.zoomIn}},[e("span",[t._v("+")])]),t._v(" "),e("button",{staticClass:"zoom-btn",attrs:{title:"缩小"},on:{click:t.zoomOut}},[e("span",[t._v("−")])])]),t._v(" "),e("div",{ref:"mindmap",staticClass:"mindmap",style:t.mindmapStyle,on:{mousedown:t.startDrag,mousemove:t.onDrag,mouseup:t.stopDrag,mouseleave:t.stopDrag}},[t.mindmapDataRef&&t.mindmapDataRef.size>0?[e("node-component",{attrs:{"node-id":"root","mindmap-data":t.mindmapDataRef},on:{"toggle-node":t.toggleNode}})]:t._e()],2)])}),[],!1,null,null,null);e.default=o.exports}}]);