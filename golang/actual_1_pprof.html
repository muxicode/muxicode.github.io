<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>pprof 实践 | 慕溪code</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/waterbee.svg">
    <meta name="description" content="打造你的知识体系，深入原理真正掌握，让知识为你所用！">
    <meta rel="keywords" content="慕溪随笔,muxiCode,muxiCode的技术博客,前端开发,IT技术,网络技术,斜杠青年">
    <meta name="viewport" content="width=device-width,width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta async="async" name="google-site-verification" content="Lp5bo-dr1R5gCVE_3iUI6KXr8tNhN5pyUxPYYKCZkO4">
    
    <link rel="preload" href="/assets/css/0.styles.d23bff06.css" as="style"><link rel="preload" href="/assets/js/app.14af41b6.js" as="script"><link rel="preload" href="/assets/js/3.a6764047.js" as="script"><link rel="preload" href="/assets/js/4.940cf505.js" as="script"><link rel="preload" href="/assets/js/131.5c8a529a.js" as="script"><link rel="prefetch" href="/assets/js/10.b9a77707.js"><link rel="prefetch" href="/assets/js/100.b4c810e4.js"><link rel="prefetch" href="/assets/js/101.ee2271b2.js"><link rel="prefetch" href="/assets/js/102.55b42776.js"><link rel="prefetch" href="/assets/js/103.bd699800.js"><link rel="prefetch" href="/assets/js/104.54e8f437.js"><link rel="prefetch" href="/assets/js/105.ec1b17d1.js"><link rel="prefetch" href="/assets/js/106.0e891cf4.js"><link rel="prefetch" href="/assets/js/107.fd983396.js"><link rel="prefetch" href="/assets/js/108.2cccfd84.js"><link rel="prefetch" href="/assets/js/109.9b997080.js"><link rel="prefetch" href="/assets/js/11.5d53c675.js"><link rel="prefetch" href="/assets/js/110.02ddc166.js"><link rel="prefetch" href="/assets/js/111.6c94daba.js"><link rel="prefetch" href="/assets/js/112.3618dde1.js"><link rel="prefetch" href="/assets/js/113.94b18a6e.js"><link rel="prefetch" href="/assets/js/114.0a532e7c.js"><link rel="prefetch" href="/assets/js/115.6f1bc72a.js"><link rel="prefetch" href="/assets/js/116.8e9f9083.js"><link rel="prefetch" href="/assets/js/117.a3c06c28.js"><link rel="prefetch" href="/assets/js/118.cb4a0ffc.js"><link rel="prefetch" href="/assets/js/119.08c7e9cf.js"><link rel="prefetch" href="/assets/js/12.5fbd0eca.js"><link rel="prefetch" href="/assets/js/120.79029fb9.js"><link rel="prefetch" href="/assets/js/121.aea8be5d.js"><link rel="prefetch" href="/assets/js/122.5484f604.js"><link rel="prefetch" href="/assets/js/123.85f2dc89.js"><link rel="prefetch" href="/assets/js/124.b47578ba.js"><link rel="prefetch" href="/assets/js/125.a32510d5.js"><link rel="prefetch" href="/assets/js/126.253c3346.js"><link rel="prefetch" href="/assets/js/127.82577e04.js"><link rel="prefetch" href="/assets/js/128.25e05fba.js"><link rel="prefetch" href="/assets/js/129.8f591f57.js"><link rel="prefetch" href="/assets/js/13.ac348bfb.js"><link rel="prefetch" href="/assets/js/130.144b78c6.js"><link rel="prefetch" href="/assets/js/132.f80cc833.js"><link rel="prefetch" href="/assets/js/133.122743cf.js"><link rel="prefetch" href="/assets/js/134.2d82b061.js"><link rel="prefetch" href="/assets/js/135.3f8e6b3c.js"><link rel="prefetch" href="/assets/js/136.e92dfba3.js"><link rel="prefetch" href="/assets/js/137.30c00d15.js"><link rel="prefetch" href="/assets/js/138.3b064b5e.js"><link rel="prefetch" href="/assets/js/139.dd6eb92b.js"><link rel="prefetch" href="/assets/js/14.8e1660a5.js"><link rel="prefetch" href="/assets/js/140.46a074b2.js"><link rel="prefetch" href="/assets/js/141.9cedf53e.js"><link rel="prefetch" href="/assets/js/142.8984eeee.js"><link rel="prefetch" href="/assets/js/143.530445ea.js"><link rel="prefetch" href="/assets/js/144.ce545a20.js"><link rel="prefetch" href="/assets/js/145.b45682bc.js"><link rel="prefetch" href="/assets/js/146.cceab697.js"><link rel="prefetch" href="/assets/js/147.7634feb3.js"><link rel="prefetch" href="/assets/js/148.13288225.js"><link rel="prefetch" href="/assets/js/149.2680e9fc.js"><link rel="prefetch" href="/assets/js/15.735f0af8.js"><link rel="prefetch" href="/assets/js/150.28ddf6df.js"><link rel="prefetch" href="/assets/js/151.1fd76b14.js"><link rel="prefetch" href="/assets/js/152.6473eb71.js"><link rel="prefetch" href="/assets/js/153.4ac697a2.js"><link rel="prefetch" href="/assets/js/16.443f2903.js"><link rel="prefetch" href="/assets/js/17.d7cf0a71.js"><link rel="prefetch" href="/assets/js/18.fd7003c8.js"><link rel="prefetch" href="/assets/js/19.9ea016e4.js"><link rel="prefetch" href="/assets/js/20.c6ecf9d1.js"><link rel="prefetch" href="/assets/js/21.f7dd7fc2.js"><link rel="prefetch" href="/assets/js/22.0d49fa3d.js"><link rel="prefetch" href="/assets/js/23.fcd25240.js"><link rel="prefetch" href="/assets/js/24.af4028c3.js"><link rel="prefetch" href="/assets/js/25.038152e8.js"><link rel="prefetch" href="/assets/js/26.4da099e1.js"><link rel="prefetch" href="/assets/js/27.e9301e1f.js"><link rel="prefetch" href="/assets/js/28.f0ed077b.js"><link rel="prefetch" href="/assets/js/29.8e403555.js"><link rel="prefetch" href="/assets/js/30.0083d6bf.js"><link rel="prefetch" href="/assets/js/31.1f75d674.js"><link rel="prefetch" href="/assets/js/32.475e722e.js"><link rel="prefetch" href="/assets/js/33.c3695d0d.js"><link rel="prefetch" href="/assets/js/34.d24cad28.js"><link rel="prefetch" href="/assets/js/35.22628243.js"><link rel="prefetch" href="/assets/js/36.4af1fc88.js"><link rel="prefetch" href="/assets/js/37.e88bdc84.js"><link rel="prefetch" href="/assets/js/38.4250b8c3.js"><link rel="prefetch" href="/assets/js/39.b25a9125.js"><link rel="prefetch" href="/assets/js/40.d7d4512d.js"><link rel="prefetch" href="/assets/js/41.c8279bbc.js"><link rel="prefetch" href="/assets/js/42.74c27faa.js"><link rel="prefetch" href="/assets/js/43.2031ee4b.js"><link rel="prefetch" href="/assets/js/44.3cd75605.js"><link rel="prefetch" href="/assets/js/45.1ddfa087.js"><link rel="prefetch" href="/assets/js/46.68181230.js"><link rel="prefetch" href="/assets/js/47.3c529e5f.js"><link rel="prefetch" href="/assets/js/48.193f9b99.js"><link rel="prefetch" href="/assets/js/49.a59621d9.js"><link rel="prefetch" href="/assets/js/5.8c12a088.js"><link rel="prefetch" href="/assets/js/50.b14d3573.js"><link rel="prefetch" href="/assets/js/51.80ad8335.js"><link rel="prefetch" href="/assets/js/52.3ab92cb9.js"><link rel="prefetch" href="/assets/js/53.206b3906.js"><link rel="prefetch" href="/assets/js/54.d4cbaf25.js"><link rel="prefetch" href="/assets/js/55.6e31926e.js"><link rel="prefetch" href="/assets/js/56.db763d5d.js"><link rel="prefetch" href="/assets/js/57.b19c0cba.js"><link rel="prefetch" href="/assets/js/58.35a4c66d.js"><link rel="prefetch" href="/assets/js/59.9a83ffe2.js"><link rel="prefetch" href="/assets/js/6.7e707682.js"><link rel="prefetch" href="/assets/js/60.de621cef.js"><link rel="prefetch" href="/assets/js/61.baf4d151.js"><link rel="prefetch" href="/assets/js/62.7522c20c.js"><link rel="prefetch" href="/assets/js/63.0ad46c11.js"><link rel="prefetch" href="/assets/js/64.1f100844.js"><link rel="prefetch" href="/assets/js/65.d57f1587.js"><link rel="prefetch" href="/assets/js/66.ec83ff74.js"><link rel="prefetch" href="/assets/js/67.94ff4bc6.js"><link rel="prefetch" href="/assets/js/68.c635ea88.js"><link rel="prefetch" href="/assets/js/69.4104bb89.js"><link rel="prefetch" href="/assets/js/7.263c36e9.js"><link rel="prefetch" href="/assets/js/70.daeb2ed2.js"><link rel="prefetch" href="/assets/js/71.fec238c1.js"><link rel="prefetch" href="/assets/js/72.061626ef.js"><link rel="prefetch" href="/assets/js/73.77b21577.js"><link rel="prefetch" href="/assets/js/74.6a96572b.js"><link rel="prefetch" href="/assets/js/75.d10cf1ee.js"><link rel="prefetch" href="/assets/js/76.9405ba54.js"><link rel="prefetch" href="/assets/js/77.42c57885.js"><link rel="prefetch" href="/assets/js/78.3c0fa6d2.js"><link rel="prefetch" href="/assets/js/79.0d9604bd.js"><link rel="prefetch" href="/assets/js/8.8acb4bcf.js"><link rel="prefetch" href="/assets/js/80.9e49cb4d.js"><link rel="prefetch" href="/assets/js/81.52084a8f.js"><link rel="prefetch" href="/assets/js/82.680ef30f.js"><link rel="prefetch" href="/assets/js/83.ae9c8440.js"><link rel="prefetch" href="/assets/js/84.ffb7e564.js"><link rel="prefetch" href="/assets/js/85.b6a5656c.js"><link rel="prefetch" href="/assets/js/86.bafd70c7.js"><link rel="prefetch" href="/assets/js/87.831f9822.js"><link rel="prefetch" href="/assets/js/88.ff29bd40.js"><link rel="prefetch" href="/assets/js/89.c71a573a.js"><link rel="prefetch" href="/assets/js/9.6afde2b8.js"><link rel="prefetch" href="/assets/js/90.0ae42e03.js"><link rel="prefetch" href="/assets/js/91.ce320d21.js"><link rel="prefetch" href="/assets/js/92.1ea8c626.js"><link rel="prefetch" href="/assets/js/93.37cc1456.js"><link rel="prefetch" href="/assets/js/94.b6297f11.js"><link rel="prefetch" href="/assets/js/95.29a81c15.js"><link rel="prefetch" href="/assets/js/96.b0011153.js"><link rel="prefetch" href="/assets/js/97.6c972c75.js"><link rel="prefetch" href="/assets/js/98.f232dafe.js"><link rel="prefetch" href="/assets/js/99.2bc9d86b.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.3733af1e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d23bff06.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/waterbee.svg" alt="慕溪code" class="logo"> <span class="site-name can-hide">慕溪code</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">
  导航
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Golang" class="dropdown-title"><span class="title">Golang</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础及进阶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/golang/1_0_nav.html" class="nav-link">
  目录导读
</a></li><li class="dropdown-subitem"><a href="/golang/1_2_struct.html" class="nav-link">
  基础入门
</a></li><li class="dropdown-subitem"><a href="/golang/2_1_high_concurrency_sharps_coroutines.html" class="nav-link">
  高并发下的工具
</a></li><li class="dropdown-subitem"><a href="/golang/3_1_go_c.html" class="nav-link">
  其他高级特性
</a></li></ul></li><li class="dropdown-item"><h4>
          测试相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/golang/4_1_golang_test.html" class="nav-link">
  构建测试
</a></li><li class="dropdown-subitem"><a href="/golang/4_2_golang_benchmark.html" class="nav-link">
  基准测试
</a></li><li class="dropdown-subitem"><a href="/golang/4_3_golang_test_eample.html" class="nav-link">
  实践&amp;建议
</a></li></ul></li><li class="dropdown-item"><h4>
          实战
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/golang/actual_1_pprof.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  pprof实战
</a></li><li class="dropdown-subitem"><a href="/golang/actual_2_pro_problem.html" class="nav-link">
  问题定位
</a></li><li class="dropdown-subitem"><a href="/golang/actual_3_restart.html" class="nav-link">
  异常重启定位
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web框架" class="dropdown-title"><span class="title">Web框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          web基础封装
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/1_http.html" class="nav-link">
  熟悉http包
</a></li><li class="dropdown-subitem"><a href="/web/2_server.html" class="nav-link">
  server抽象
</a></li><li class="dropdown-subitem"><a href="/web/3_context.html" class="nav-link">
  context抽象
</a></li><li class="dropdown-subitem"><a href="/web/4_simple_route.html" class="nav-link">
  简单路树
</a></li><li class="dropdown-subitem"><a href="/web/5_handler.html" class="nav-link">
  handler抽象
</a></li><li class="dropdown-subitem"><a href="/web/6_filter.html" class="nav-link">
  filter实现AOP
</a></li><li class="dropdown-subitem"><a href="/web/7_handler_tree.html" class="nav-link">
  handler路由树
</a></li><li class="dropdown-subitem"><a href="/web/8_context_pool.html" class="nav-link">
  context池化
</a></li><li class="dropdown-subitem"><a href="/web/9_gin_router.html" class="nav-link">
  gin路由树
</a></li><li class="dropdown-subitem"><a href="/web/10_graceful_exit.html" class="nav-link">
  服务优雅退出
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AI应用实践" class="dropdown-title"><span class="title">AI应用实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          大模型应用
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ai/ai_app_pratice.html" class="nav-link">
  零代码搭建AI知识库
</a></li><li class="dropdown-subitem"><a href="/ai/ai_front_end.html" class="nav-link">
  Claude 前端开发最佳实践指
</a></li><li class="dropdown-subitem"><a href="/ai/quick_prompt.html" class="nav-link">
  Prompt 宝藏小抄
</a></li><li class="dropdown-subitem"><a href="/ai/dev_prompt.html" class="nav-link">
  开发助手专家词汇表
</a></li><li class="dropdown-subitem"><a href="/ai/cursor_pratice.html" class="nav-link">
  cursor实践
</a></li><li class="dropdown-subitem"><a href="/ai/cursor_functions.html" class="nav-link">
  cursor功能概览
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务工程实践" class="dropdown-title"><span class="title">微服务工程实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          微服务概览与治理
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/microservice/overview_1_overview.html" class="nav-link">
  微服务概览
</a></li><li class="dropdown-subitem"><a href="/microservice/overview_2_desgin.html" class="nav-link">
  微服务设计
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  grpc与服务发现
</a></li><li class="dropdown-subitem"><a href="/microservice/overview_4_multi_tenant.html" class="nav-link">
  多集群与多租户
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link">
  体系学习总览
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/about_algorithm.html" class="nav-link">
  什么是算法?
</a></li><li class="dropdown-item"><h4>
          阶段一：初出茅庐
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/g1_base_1_binary_0_binary.html" class="nav-link">
  位运算
</a></li><li class="dropdown-subitem"><a href="/algorithm/g1_sort_1_select_sort.html" class="nav-link">
  排序
</a></li><li class="dropdown-subitem"><a href="/algorithm/g1_compare_for_ans.html" class="nav-link">
  对数器
</a></li><li class="dropdown-subitem"><a href="/algorithm/g1_bisectiom_1_find_num.html" class="nav-link">
  二分及其拓展
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  递归到动态规划
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  链表
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  队列
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  栈
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  哈希表的使用
</a></li><li class="dropdown-subitem"><a href="/algorithm/g1_base_9_heap.html" class="nav-link">
  堆
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  加强堆
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  前缀树
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  二叉树
</a></li><li class="dropdown-subitem"><a href="/algorithm/g1_base_8_union_set_1.html" class="nav-link">
  并查集
</a></li><li class="dropdown-subitem"><a href="/algorithm/g1_graph_1_base.html" class="nav-link">
  图
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  哈夫曼树
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  其他
</a></li></ul></li><li class="dropdown-item"><h4>
          阶段二：知识的升华
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  斐波那契数列
</a></li><li class="dropdown-subitem"><a href="/algorithm/g2_advance_1_kmp_1.html" class="nav-link">
  KMP算法
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  Manacher算法
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  无序数组寻找第 K 小的值
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  蓄水池算法
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  Morris遍历
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  资源限制类题目的算法设计
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  打表找规律
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  根据题目的数量猜解法技巧
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  卡特兰数
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  数组三连问题
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  状态压缩的动态规划
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  设计简化外部信息的动态规划
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  窗口内最大值和最小值的更新结构
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  单调栈
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  线段树
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  IndexTree
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  AC自动机
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  和哈希函数有关的数据结构
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  二维数组调整
</a></li></ul></li><li class="dropdown-item"><h4>
          阶段三：高峰之巅
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  编辑距离
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  Nimi博弈
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  括号嵌套求解的递归模型
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  最长递增子序列问题
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  约瑟夫环问题
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  完美洗牌问题
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  A*算法
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  Bellman Ford算法
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  强连通分量
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  KM算法
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  扫描线算法
</a></li></ul></li><li class="dropdown-item"><h4>
          阶段四：登峰造极
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  有序表
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  四边形不等式
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  后缀数组DC3算法
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          方法论
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/develop/methodology/1_python_design_pattern.html" class="nav-link">
  设计模式
</a></li><li class="dropdown-subitem"><a href="/develop/methodology/2_reconstruction.html" class="nav-link">
  重构
</a></li></ul></li><li class="dropdown-item"><h4>
          部署
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/develop/deployment/1_docker_built_project.html" class="nav-link">
  项目容器化
</a></li></ul></li><li class="dropdown-item"><h4>
          一些示例
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/develop/examples/1_mongo.html" class="nav-link">
  mongodb使用示例
</a></li><li class="dropdown-subitem"><a href="/develop/examples/2_python.html" class="nav-link">
  python基础知识点
</a></li></ul></li><li class="dropdown-item"><h4>
          实践总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/develop/practice/1_recursion_ai.html" class="nav-link">
  玩转递归实及AI实践篇
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构" class="dropdown-title"><span class="title">架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          方法论
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/architecture/ddd_1_introduce.html" class="nav-link">
  DDD
</a></li><li class="dropdown-subitem"><a href="/architecture/ddd_2_ddd.html" class="nav-link">
  DDD工程实践
</a></li><li class="dropdown-subitem"><a href="/architecture/ddd_3_event_strom.html" class="nav-link">
  DDD事件风暴
</a></li><li class="dropdown-subitem"><a href="/architecture/dci_1_dci&amp;ddd.html" class="nav-link">
  DCI
</a></li><li class="dropdown-subitem"><a href="/architecture/complexity_oriented_1_introduce.html" class="nav-link">
  面向复杂度的架构设计
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/architecture/tools_1_introduce.html" class="nav-link">
  UML
</a></li></ul></li><li class="dropdown-item"><h4>
          实践
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/architecture/practice_1_parse_service.html" class="nav-link">
  解析服务实践
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          NoSQL 数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/database/nosql_1_redis_deploy.html" class="nav-link">
  redis 部署方式
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人成长" class="dropdown-title"><span class="title">个人成长</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          阅读书籍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/growth/books/" class="nav-link">
  简介
</a></li><li class="dropdown-subitem"><a href="/growth/books/mind_1_the_gift.html" class="nav-link">
  心灵
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  个人成长
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  亲子家庭
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  人文历史
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  商业财经
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  社科新知
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  健康生活
</a></li></ul></li><li class="dropdown-item"><h4>
          文章收藏
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/growth/article/" class="nav-link">
  说明
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/vue_1_mall.html" class="nav-link">
  vue实战
</a></li><li class="dropdown-subitem"><a href="/fontend/vue_2_props_modify.html" class="nav-link">
  Props双向修改
</a></li></ul></li><li class="dropdown-item"><h4>
          ElementUI
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/element_1_table.html" class="nav-link">
  table组件自定义
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/util_1_acrross.html" class="nav-link">
  请求封装
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/muxicode/muxicode.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">
  导航
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Golang" class="dropdown-title"><span class="title">Golang</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础及进阶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/golang/1_0_nav.html" class="nav-link">
  目录导读
</a></li><li class="dropdown-subitem"><a href="/golang/1_2_struct.html" class="nav-link">
  基础入门
</a></li><li class="dropdown-subitem"><a href="/golang/2_1_high_concurrency_sharps_coroutines.html" class="nav-link">
  高并发下的工具
</a></li><li class="dropdown-subitem"><a href="/golang/3_1_go_c.html" class="nav-link">
  其他高级特性
</a></li></ul></li><li class="dropdown-item"><h4>
          测试相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/golang/4_1_golang_test.html" class="nav-link">
  构建测试
</a></li><li class="dropdown-subitem"><a href="/golang/4_2_golang_benchmark.html" class="nav-link">
  基准测试
</a></li><li class="dropdown-subitem"><a href="/golang/4_3_golang_test_eample.html" class="nav-link">
  实践&amp;建议
</a></li></ul></li><li class="dropdown-item"><h4>
          实战
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/golang/actual_1_pprof.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  pprof实战
</a></li><li class="dropdown-subitem"><a href="/golang/actual_2_pro_problem.html" class="nav-link">
  问题定位
</a></li><li class="dropdown-subitem"><a href="/golang/actual_3_restart.html" class="nav-link">
  异常重启定位
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web框架" class="dropdown-title"><span class="title">Web框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          web基础封装
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/1_http.html" class="nav-link">
  熟悉http包
</a></li><li class="dropdown-subitem"><a href="/web/2_server.html" class="nav-link">
  server抽象
</a></li><li class="dropdown-subitem"><a href="/web/3_context.html" class="nav-link">
  context抽象
</a></li><li class="dropdown-subitem"><a href="/web/4_simple_route.html" class="nav-link">
  简单路树
</a></li><li class="dropdown-subitem"><a href="/web/5_handler.html" class="nav-link">
  handler抽象
</a></li><li class="dropdown-subitem"><a href="/web/6_filter.html" class="nav-link">
  filter实现AOP
</a></li><li class="dropdown-subitem"><a href="/web/7_handler_tree.html" class="nav-link">
  handler路由树
</a></li><li class="dropdown-subitem"><a href="/web/8_context_pool.html" class="nav-link">
  context池化
</a></li><li class="dropdown-subitem"><a href="/web/9_gin_router.html" class="nav-link">
  gin路由树
</a></li><li class="dropdown-subitem"><a href="/web/10_graceful_exit.html" class="nav-link">
  服务优雅退出
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AI应用实践" class="dropdown-title"><span class="title">AI应用实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          大模型应用
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ai/ai_app_pratice.html" class="nav-link">
  零代码搭建AI知识库
</a></li><li class="dropdown-subitem"><a href="/ai/ai_front_end.html" class="nav-link">
  Claude 前端开发最佳实践指
</a></li><li class="dropdown-subitem"><a href="/ai/quick_prompt.html" class="nav-link">
  Prompt 宝藏小抄
</a></li><li class="dropdown-subitem"><a href="/ai/dev_prompt.html" class="nav-link">
  开发助手专家词汇表
</a></li><li class="dropdown-subitem"><a href="/ai/cursor_pratice.html" class="nav-link">
  cursor实践
</a></li><li class="dropdown-subitem"><a href="/ai/cursor_functions.html" class="nav-link">
  cursor功能概览
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务工程实践" class="dropdown-title"><span class="title">微服务工程实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          微服务概览与治理
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/microservice/overview_1_overview.html" class="nav-link">
  微服务概览
</a></li><li class="dropdown-subitem"><a href="/microservice/overview_2_desgin.html" class="nav-link">
  微服务设计
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  grpc与服务发现
</a></li><li class="dropdown-subitem"><a href="/microservice/overview_4_multi_tenant.html" class="nav-link">
  多集群与多租户
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link">
  体系学习总览
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/about_algorithm.html" class="nav-link">
  什么是算法?
</a></li><li class="dropdown-item"><h4>
          阶段一：初出茅庐
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/g1_base_1_binary_0_binary.html" class="nav-link">
  位运算
</a></li><li class="dropdown-subitem"><a href="/algorithm/g1_sort_1_select_sort.html" class="nav-link">
  排序
</a></li><li class="dropdown-subitem"><a href="/algorithm/g1_compare_for_ans.html" class="nav-link">
  对数器
</a></li><li class="dropdown-subitem"><a href="/algorithm/g1_bisectiom_1_find_num.html" class="nav-link">
  二分及其拓展
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  递归到动态规划
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  链表
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  队列
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  栈
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  哈希表的使用
</a></li><li class="dropdown-subitem"><a href="/algorithm/g1_base_9_heap.html" class="nav-link">
  堆
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  加强堆
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  前缀树
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  二叉树
</a></li><li class="dropdown-subitem"><a href="/algorithm/g1_base_8_union_set_1.html" class="nav-link">
  并查集
</a></li><li class="dropdown-subitem"><a href="/algorithm/g1_graph_1_base.html" class="nav-link">
  图
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  哈夫曼树
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  其他
</a></li></ul></li><li class="dropdown-item"><h4>
          阶段二：知识的升华
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  斐波那契数列
</a></li><li class="dropdown-subitem"><a href="/algorithm/g2_advance_1_kmp_1.html" class="nav-link">
  KMP算法
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  Manacher算法
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  无序数组寻找第 K 小的值
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  蓄水池算法
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  Morris遍历
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  资源限制类题目的算法设计
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  打表找规律
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  根据题目的数量猜解法技巧
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  卡特兰数
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  数组三连问题
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  状态压缩的动态规划
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  设计简化外部信息的动态规划
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  窗口内最大值和最小值的更新结构
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  单调栈
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  线段树
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  IndexTree
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  AC自动机
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  和哈希函数有关的数据结构
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  二维数组调整
</a></li></ul></li><li class="dropdown-item"><h4>
          阶段三：高峰之巅
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  编辑距离
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  Nimi博弈
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  括号嵌套求解的递归模型
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  最长递增子序列问题
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  约瑟夫环问题
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  完美洗牌问题
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  A*算法
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  Bellman Ford算法
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  强连通分量
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  KM算法
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  扫描线算法
</a></li></ul></li><li class="dropdown-item"><h4>
          阶段四：登峰造极
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  有序表
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  四边形不等式
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  后缀数组DC3算法
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          方法论
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/develop/methodology/1_python_design_pattern.html" class="nav-link">
  设计模式
</a></li><li class="dropdown-subitem"><a href="/develop/methodology/2_reconstruction.html" class="nav-link">
  重构
</a></li></ul></li><li class="dropdown-item"><h4>
          部署
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/develop/deployment/1_docker_built_project.html" class="nav-link">
  项目容器化
</a></li></ul></li><li class="dropdown-item"><h4>
          一些示例
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/develop/examples/1_mongo.html" class="nav-link">
  mongodb使用示例
</a></li><li class="dropdown-subitem"><a href="/develop/examples/2_python.html" class="nav-link">
  python基础知识点
</a></li></ul></li><li class="dropdown-item"><h4>
          实践总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/develop/practice/1_recursion_ai.html" class="nav-link">
  玩转递归实及AI实践篇
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="架构" class="dropdown-title"><span class="title">架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          方法论
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/architecture/ddd_1_introduce.html" class="nav-link">
  DDD
</a></li><li class="dropdown-subitem"><a href="/architecture/ddd_2_ddd.html" class="nav-link">
  DDD工程实践
</a></li><li class="dropdown-subitem"><a href="/architecture/ddd_3_event_strom.html" class="nav-link">
  DDD事件风暴
</a></li><li class="dropdown-subitem"><a href="/architecture/dci_1_dci&amp;ddd.html" class="nav-link">
  DCI
</a></li><li class="dropdown-subitem"><a href="/architecture/complexity_oriented_1_introduce.html" class="nav-link">
  面向复杂度的架构设计
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/architecture/tools_1_introduce.html" class="nav-link">
  UML
</a></li></ul></li><li class="dropdown-item"><h4>
          实践
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/architecture/practice_1_parse_service.html" class="nav-link">
  解析服务实践
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          NoSQL 数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/database/nosql_1_redis_deploy.html" class="nav-link">
  redis 部署方式
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人成长" class="dropdown-title"><span class="title">个人成长</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          阅读书籍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/growth/books/" class="nav-link">
  简介
</a></li><li class="dropdown-subitem"><a href="/growth/books/mind_1_the_gift.html" class="nav-link">
  心灵
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  个人成长
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  亲子家庭
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  人文历史
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  商业财经
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  社科新知
</a></li><li class="dropdown-subitem"><a href="/waiting/" class="nav-link">
  健康生活
</a></li></ul></li><li class="dropdown-item"><h4>
          文章收藏
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/growth/article/" class="nav-link">
  说明
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/vue_1_mall.html" class="nav-link">
  vue实战
</a></li><li class="dropdown-subitem"><a href="/fontend/vue_2_props_modify.html" class="nav-link">
  Props双向修改
</a></li></ul></li><li class="dropdown-item"><h4>
          ElementUI
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/element_1_table.html" class="nav-link">
  table组件自定义
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/util_1_acrross.html" class="nav-link">
  请求封装
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/muxicode/muxicode.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Golang</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/golang/1_0_nav.html" class="sidebar-link">深入理解Golang</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基础及入门</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/golang/1_1_why_go.html" class="sidebar-link">为什么是Go？</a></li><li><a href="/golang/1_2_struct.html" class="sidebar-link">数据结构</a></li><li><a href="/golang/1_3_go_ptr.html" class="sidebar-link">指针</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>高并发下的工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/golang/2_1_high_concurrency_sharps_coroutines.html" class="sidebar-link">高并发利器-协程</a></li><li><a href="/golang/2_2_high_concurrency_security_ock_mechanism.html" class="sidebar-link">高并发下的保安-锁机制</a></li><li><a href="/golang/2_3_channel.html" class="sidebar-link">通信宝藏-channel</a></li><li><a href="/golang/2_4_tcp_newwork.html" class="sidebar-link">TCP网络编程</a></li><li><a href="/golang/2_5_memory_model_and_garbage_collection.html" class="sidebar-link">内存模型与垃圾回收</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他高级特性</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/golang/3_1_go_c.html" class="sidebar-link">如何实现 GO 调用 C 代码？</a></li><li><a href="/golang/3_2_go_defer.html" class="sidebar-link">defer 的底层原理是怎样的？</a></li><li><a href="/golang/3_3_go_recover.html" class="sidebar-link">recover 如何在panic 中拯救程序？</a></li><li><a href="/golang/3_4_go_reflect.html" class="sidebar-link">recover 如何在panic 中拯救程序？</a></li><li><a href="/golang/3_5_go_reflect_use.html" class="sidebar-link">实战：使用反射调用方法</a></li><li><a href="/golang/3_6_go_learning.html" class="sidebar-link">其他学习资料</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>测试相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/golang/4_1_golang_test.html" class="sidebar-link">构建测试</a></li><li><a href="/golang/4_2_golang_benchmark.html" class="sidebar-link">基准测试</a></li><li><a href="/golang/4_3_golang_test_eample.html" class="sidebar-link">实践&amp;建议</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>实战</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/golang/actual_1_pprof.html" aria-current="page" class="active sidebar-link">pprof 实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#实验准备" class="sidebar-link">实验准备</a></li><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#获取-炸弹" class="sidebar-link">获取“炸弹”</a></li><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#使用-pprof" class="sidebar-link">使用 pprof</a></li><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#排查-cpu-占用过高" class="sidebar-link">排查 CPU 占用过高</a></li><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#排查内存占用过高" class="sidebar-link">排查内存占用过高</a></li><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#排查频繁内存回收" class="sidebar-link">排查频繁内存回收</a></li><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#排查协程泄露" class="sidebar-link">排查协程泄露</a></li><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#排查锁的争用" class="sidebar-link">排查锁的争用</a></li><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#排查阻塞操作" class="sidebar-link">排查阻塞操作</a></li><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#思考题" class="sidebar-link">思考题</a></li><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#最后" class="sidebar-link">最后</a></li><li class="sidebar-sub-header"><a href="/golang/actual_1_pprof.html#相关链接" class="sidebar-link">相关链接</a></li></ul></li><li><a href="/golang/actual_2_pro_problem.html" class="sidebar-link">问题定位</a></li><li><a href="/golang/actual_3_restart.html" class="sidebar-link">异常重启分析及定位</a></li></ul></section></li></ul> </aside> <div><main class="page"> <div class="theme-default-content content__default"><h1 id="go性能分析pprof-实践"><a href="#go性能分析pprof-实践" class="header-anchor">#</a> GO性能分析pprof 实践</h1> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>如果要说在 golang 开发过程进行性能调优，pprof 一定是一个大杀器般的工具。但在网上找到的教程都偏向简略，难寻真的能应用于实战的教程。这也无可厚非，毕竟 pprof 是当程序占用资源异常时才需要启用的工具，而我相信大家的编码水平和排场问题的能力是足够高的，一般不会写出性能极度堪忧的程序，且即使发现有一些资源异常占用，也会通过排查代码快速定位，这也导致 pprof 需要上战场的机会少之又少。即使大家有心想学习使用 pprof，却也常常相忘于江湖。</p> <p><strong>既然如此，那我就送大家一个性能极度堪忧的“炸弹”程序吧！</strong></p> <p>这程序没啥正经用途缺极度占用资源，基本覆盖了常见的性能问题。本文就是希望读者能一步一步按照提示，使用 pprof 定位这个程序的的性能瓶颈所在，借此学习 pprof 工具的使用方法。</p> <p>因此，本文是一场“实验课”而非“理论课”，请读者腾出时间，脚踏实地，一步一步随实验步骤进行操作，这会是一个很有趣的冒险，不会很无聊，希望你能喜欢。</p> <h2 id="实验准备"><a href="#实验准备" class="header-anchor">#</a> 实验准备</h2> <p>这里假设你有基本的 golang 开发功底，拥有 golang 开发环境并配置了 $GOPATH，能熟练阅读简单的代码或进行简单的修改，且知道如何编译运行 golang 程序。此外，需要你大致知道 pprof 是干什么的，有一个基本印象即可，你可以花几分钟时间读一下《Golang 大杀器之性能剖析 PProf》的开头部分，这不会耽误太久。</p> <p>此外由于你需要运行一个“炸弹”程序，请务必确保你用于做实验的机器有充足的资源，你的机器至少需要：</p> <ul><li>2 核 CPU；</li> <li>2G 内存。</li></ul> <p>注意，以上只是最低需求，你的机器配置能高于上述要求自然最好。实际运行“炸弹”时，你可以关闭电脑上其他不必要的程序，甚至 IDE 都不用开，我们的实验操作基本上是在命令行里进行的。</p> <p>此外，务必确保你是在个人机器上运行“炸弹”的，能接受机器死机重启的后果（虽然这发生的概率很低）。请你务必不要在危险的边缘试探，比如在线上服务器运行这个程序。</p> <p>可能说得你都有点害怕了，为打消你顾虑，我可以剧透一下“炸弹”的情况，让你安心：</p> <ul><li>程序会占用约 2G 内存；</li> <li>程序占用 CPU 最高约 100%（总量按“核数 * 100%”来算）；</li> <li>程序不涉及网络或文件读写；</li> <li>程序除了吃资源之外没有其他危险操作。</li></ul> <p>且程序所占用的各类资源，均不会随着运行时间的增长而增长，换句话说，只要你把“炸弹”启动并正常运行了一分钟，就基本确认安全了，之后即使运行几天也不会有更多的资源占用，除了有点费电之外。</p> <h2 id="获取-炸弹"><a href="#获取-炸弹" class="header-anchor">#</a> 获取“炸弹”</h2> <p>炸弹程序的代码我已经放到了 <a href="https://blog.wolfogre.com/redirect/v3/A_4-v86v-9Btg9a9FuRKCcgSAwM8Cv46xcU7LxImWv3FQQYW3DshxTsGzDw8cyzMPIIcSogxEgMDPAr-OsXFWhYGO25BBhbcOyH9xTwGTQrFOwbMPDwFzDyCHEqIxQ" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 上，你只需要在终端里运行 <code>go get</code> 便可获取，注意加上 <code>-d</code> 参数，避免下载后自动安装：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>go get <span class="token parameter variable">-d</span> github.com/wolfogre/go-pprof-practice
<span class="token builtin class-name">cd</span> <span class="token variable">$GOPATH</span>/src/github.com/wolfogre/go-pprof-practice
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>我们可以简单看一下 <code>main.go</code> 文件，里面有几个帮助排除性能调问题的关键的的点，我加上了些注释方便你理解，如下：</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token comment">// 略</span>
	<span class="token boolean">_</span> <span class="token string">&quot;net/http/pprof&quot;</span> <span class="token comment">// 会自动注册 handler 到 http server，方便通过 http 接口获取程序运行采样报告</span>
	<span class="token comment">// 略</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 略</span>

	runtime<span class="token punctuation">.</span><span class="token function">GOMAXPROCS</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 限制 CPU 使用数，避免过载</span>
	runtime<span class="token punctuation">.</span><span class="token function">SetMutexProfileFraction</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 开启对锁调用的跟踪</span>
	runtime<span class="token punctuation">.</span><span class="token function">SetBlockProfileRate</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 开启对阻塞操作的跟踪</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 启动一个 http server，注意 pprof 相关的 handler 已经自动注册过了</span>
		<span class="token keyword">if</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span><span class="token string">&quot;:6060&quot;</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 略</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>除此之外的其他代码你一律不用看，那些都是我为了模拟一个“逻辑复杂”的程序而编造的，其中大多数的问题很容易通过肉眼发现，但我们需要做的是通过 pprof 来定位代码的问题，所以为了保证实验的趣味性请不要提前阅读代码，可以实验完成后再看。</p> <p>接着我们需要编译一下这个程序并运行，你不用担心依赖问题，这个程序没有任何外部依赖。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>go build
./go-pprof-practice
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>运行后注意查看一下资源是否吃紧，机器是否还能扛得住，坚持一分钟，如果确认没问题，咱们再进行下一步。</p> <p>控制台里应该会不停的打印日志，都是一些“猫狗虎鼠在不停地吃喝拉撒”的屁话，没有意义，不用细看。</p> <p><img src="/actual_1_pprof.assets/ppof_1.drawio.png" alt=""></p> <h2 id="使用-pprof"><a href="#使用-pprof" class="header-anchor">#</a> 使用 pprof</h2> <p>保持程序运行，打开浏览器访问 <code>http://localhost:6060/debug/pprof/</code>，可以看到如下页面：</p> <p><img src="/actual_1_pprof.assets/ppof_2.drawio.png" alt="image"></p> <p>页面上展示了可用的程序运行采样数据，分别有：</p> <table><thead><tr><th style="text-align:left;">类型</th> <th style="text-align:left;">描述</th> <th style="text-align:left;">备注</th></tr></thead> <tbody><tr><td style="text-align:left;">allocs</td> <td style="text-align:left;">内存分配情况的采样信息</td> <td style="text-align:left;">可以用浏览器打开，但可读性不高</td></tr> <tr><td style="text-align:left;">blocks</td> <td style="text-align:left;">阻塞操作情况的采样信息</td> <td style="text-align:left;">可以用浏览器打开，但可读性不高</td></tr> <tr><td style="text-align:left;">cmdline</td> <td style="text-align:left;">显示程序启动命令及参数</td> <td style="text-align:left;">可以用浏览器打开，这里会显示 <code>./go-pprof-practice</code></td></tr> <tr><td style="text-align:left;">goroutine</td> <td style="text-align:left;">当前所有协程的堆栈信息</td> <td style="text-align:left;">可以用浏览器打开，但可读性不高</td></tr> <tr><td style="text-align:left;">heap</td> <td style="text-align:left;">堆上内存使用情况的采样信息</td> <td style="text-align:left;">可以用浏览器打开，但可读性不高</td></tr> <tr><td style="text-align:left;">mutex</td> <td style="text-align:left;">锁争用情况的采样信息</td> <td style="text-align:left;">可以用浏览器打开，但可读性不高</td></tr> <tr><td style="text-align:left;">profile</td> <td style="text-align:left;">CPU 占用情况的采样信息</td> <td style="text-align:left;">浏览器打开会下载文件</td></tr> <tr><td style="text-align:left;">threadcreate</td> <td style="text-align:left;">系统线程创建情况的采样信息</td> <td style="text-align:left;">可以用浏览器打开，但可读性不高</td></tr> <tr><td style="text-align:left;">trace</td> <td style="text-align:left;">程序运行跟踪信息</td> <td style="text-align:left;">浏览器打开会下载文件，本文不涉及，可另行参阅《深入浅出 Go trace》)</td></tr></tbody></table> <p>因为 cmdline 没有什么实验价值，trace 与本文主题关系不大，threadcreate 涉及的情况偏复杂，所以这三个类型的采样信息这里暂且不提。除此之外，其他所有类型的采样信息本文都会涉及到，且炸弹程序已经为每一种类型的采样信息埋藏了一个对应的性能问题，等待你的发现。</p> <p>由于直接阅读采样信息缺乏直观性，我们需要借助 <code>go tool pprof</code> 命令来排查问题，这个命令是 go 原生自带的，所以不用额外安装。</p> <p>我们先不用完整地学习如何使用这个命令，毕竟那太枯燥了，我们一边实战一边学习。</p> <p>以下正式开始。</p> <h2 id="排查-cpu-占用过高"><a href="#排查-cpu-占用过高" class="header-anchor">#</a> 排查 CPU 占用过高</h2> <p>我们首先通过活动监视器（或任务管理器、top 命令，取决于你的操作系统和你的喜好），查看一下炸弹程序的 CPU 占用：</p> <p><img src="/actual_1_pprof.assets/ppof_3.drawio.png" alt=""></p> <p>可以看到 CPU 占用相当高，这显然是有问题的，我们使用 <code>go tool pprof</code> 来排场一下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>go tool pprof http://localhost:6060/debug/pprof/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>等待一会儿后，进入一个交互式终端：</p> <p><img src="/actual_1_pprof.assets/ppof_4.drawio.png" alt=""></p> <p>输入 top 命令，查看 CPU 占用较高的调用：</p> <p><img src="/actual_1_pprof.assets/ppof_5.drawio.png" alt=""></p> <p>很明显，CPU 占用过高是 <code>github.com/wolfogre/go-pprof-practice/animal/felidae/tiger.(*Tiger).Eat</code> 造成的。</p> <blockquote><p>注：为了保证实验节奏，关于图中 <code>flat</code>、<code>flat%</code>、<code>sum%</code>、<code>cum</code>、<code>cum%</code> 等参数的含义这里就不展开讲了，你可以先简单理解为数字越大占用情况越严重，之后可以在《Golang 大杀器之性能剖析 PProf》等其他资料中深入学习。</p></blockquote> <p>输入 <code>list Eat</code>，查看问题具体在代码的哪一个位置：</p> <p><img src="/actual_1_pprof.assets/ppof_6.drawio.png" alt=""></p> <p>可以看到，是第 24 行那个一百亿次空循环占用了大量 CPU 时间，至此，问题定位成功！</p> <p>接下来有一个扩展操作：图形化显示调用栈信息，这很酷，但是需要你事先在机器上安装 <code>graphviz</code>，大多数系统上可以轻松安装它：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>brew <span class="token function">install</span> graphviz <span class="token comment"># for macos</span>
<span class="token function">apt</span> <span class="token function">install</span> graphviz <span class="token comment"># for ubuntu</span>
yum <span class="token function">install</span> graphviz <span class="token comment"># for centos</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>或者你也可以访问 <a href="https://graphviz.gitlab.io/download/" target="_blank" rel="noopener noreferrer">graphviz 官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>寻找适合自己操作系统的安装方法。</p> <p>安装完成后，我们继续在上文的交互式终端里输入 <code>web</code>，注意，虽然这个命令的名字叫“web”，但它的实际行为是产生一个 .svg 文件，并调用你的系统里设置的默认打开 .svg 的程序打开它。如果你的系统里打开 .svg 的默认程序并不是浏览器（比如可能是你的代码编辑器），这时候你需要设置一下默认使用浏览器打开 .svg 文件，相信这难不倒你。</p> <p>你应该可以看到：</p> <p><img src="/actual_1_pprof.assets/pprof_7.drawio.png" alt=""></p> <p>图中，<code>tiger.(*Tiger).Eat</code> 函数的框特别大，箭头特别粗，pprof 生怕你不知道这个函数的 CPU 占用很高，这张图还包含了很多有趣且有价值的信息，你可以多看一会儿再继续。</p> <p>至此，这一小节使用 pprof 定位 CPU 占用的实验就结束了，你需要输入 <code>exit</code> 退出 pprof 的交互式终端。</p> <p>为了方便进行后面的实验，我们修复一下这个问题，不用太麻烦，注释掉相关代码即可：</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>t <span class="token operator">*</span>Tiger<span class="token punctuation">)</span> <span class="token function">Eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;eat&quot;</span><span class="token punctuation">)</span>
	<span class="token comment">//loop := 10000000000</span>
	<span class="token comment">//for i := 0; i &lt; loop; i++ {</span>
	<span class="token comment">//	// do nothing</span>
	<span class="token comment">//}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>之后修复问题的的方法都是注释掉相关的代码，不再赘述。你可能觉得这很粗暴，但要知道，这个实验的重点是如何使用 pprof 定位问题，我们不需要花太多时间在改代码上。</p> <h2 id="排查内存占用过高"><a href="#排查内存占用过高" class="header-anchor">#</a> 排查内存占用过高</h2> <p>重新编译炸弹程序，再次运行，可以看到 CPU 占用率已经下来了，但是内存的占用率仍然很高：</p> <p><img src="/actual_1_pprof.assets/pprof_8.drawio.png" alt="image"></p> <p>我们再次运行使用 pprof 命令，注意这次使用的 URL 的结尾是 heap：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>go tool pprof http://localhost:6060/debug/pprof/heap
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>再一次使用 <code>top</code>、<code>list</code> 来定问问题代码：</p> <p><img src="/actual_1_pprof.assets/pprof_9.drawio.png" alt=""></p> <p>可以看到这次出问题的地方在 <code>github.com/wolfogre/go-pprof-practice/animal/muridae/mouse.(*Mouse).Steal</code>，函数内容如下：</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>Mouse<span class="token punctuation">)</span> <span class="token function">Steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;steal&quot;</span><span class="token punctuation">)</span>
	max <span class="token operator">:=</span> constant<span class="token punctuation">.</span>Gi
	<span class="token keyword">for</span> <span class="token function">len</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>buffer<span class="token punctuation">)</span> <span class="token operator">*</span> constant<span class="token punctuation">.</span>Mi <span class="token operator">&lt;</span> max <span class="token punctuation">{</span>
		m<span class="token punctuation">.</span>buffer <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>buffer<span class="token punctuation">,</span> <span class="token punctuation">[</span>constant<span class="token punctuation">.</span>Mi<span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>可以看到，这里有个循环会一直向 m.buffer 里追加长度为 1 MiB 的数组，直到总容量到达 1 GiB 为止，且一直不释放这些内存，这就难怪会有这么高的内存占用了。</p> <p>使用 <code>web</code> 来查看图形化展示，可以再次确认问题确实出在这里：</p> <p><img src="/actual_1_pprof.assets/pprof_10.drawio.png" alt="image"></p> <p>现在我们同样是注释掉相关代码来解决这个问题。</p> <p>再次编译运行，查看内存占用：</p> <p><img src="/actual_1_pprof.assets/pprof_11.drawio.png" alt=""></p> <p>可以看到内存占用已经将到了 35 MB，似乎内存的使用已经恢复正常，一片祥和。</p> <p>但是，内存相关的性能问题真的已经全部解决了吗？</p> <h2 id="排查频繁内存回收"><a href="#排查频繁内存回收" class="header-anchor">#</a> 排查频繁内存回收</h2> <p>你应该知道，频繁的 GC 对 golang 程序性能的影响也是非常严重的。虽然现在这个炸弹程序内存使用量并不高，但这会不会是频繁 GC 之后的假象呢？</p> <p>为了获取程序运行过程中 GC 日志，我们需要先退出炸弹程序，再在重新启动前赋予一个环境变量，同时为了避免其他日志的干扰，使用 grep 筛选出 GC 日志查看：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">GODEBUG</span><span class="token operator">=</span>gctrace<span class="token operator">=</span><span class="token number">1</span> ./go-pprof-practice <span class="token operator">|</span> <span class="token function">grep</span> gc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>日志输出如下：</p> <p><img src="/actual_1_pprof.assets/pprof_12.drawio.png" alt=""></p> <p>可以看到，GC 差不多每 3 秒就发生一次，且每次 GC 都会从 16MB 清理到几乎 0MB，说明程序在不断的申请内存再释放，这是高性能 golang 程序所不允许的。</p> <p>如果你希望进一步了解 golang 的 GC 日志可以查看《如何监控 golang 程序的垃圾回收》,为保证实验节奏，这里不做展开。</p> <p>所以接下来使用 pprof 排查时，我们在乎的不是什么地方在占用大量内存，而是什么地方在不停地申请内存，这两者是有区别的。</p> <p>由于内存的申请与释放频度是需要一段时间来统计的，所有我们保证炸弹程序已经运行了几分钟之后，再运行命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>go tool pprof http://localhost:6060/debug/pprof/allocs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>同样使用 top、list、web 大法：</p> <p><img src="/actual_1_pprof.assets/pprof_13.drawio.png" alt=""></p> <p><img src="/actual_1_pprof.assets/pprof_14.drawio.png" alt=""></p> <p>可以看到 <code>github.com/wolfogre/go-pprof-practice/animal/canidae/dog.(*Dog).Run</code> 会进行无意义的内存申请，而这个函数又会被频繁调用，这才导致程序不停地进行 GC:</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>d <span class="token operator">*</span>Dog<span class="token punctuation">)</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;run&quot;</span><span class="token punctuation">)</span>
	<span class="token boolean">_</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">16</span> <span class="token operator">*</span> constant<span class="token punctuation">.</span>Mi<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这里有个小插曲，你可尝试一下将 <code>16 * constant.Mi</code> 修改成一个较小的值，重新编译运行，会发现并不会引起频繁 GC，原因是在 golang 里，对象是使用堆内存还是栈内存，由编译器进行逃逸分析并决定，如果对象不会逃逸，便可在使用栈内存，但总有意外，就是对象的尺寸过大时，便不得不使用堆内存。所以这里设置申请 16 MiB 的内存就是为了避免编译器直接在栈上分配，如果那样得话就不会涉及到 GC 了。</p> <p>我们同样注释掉问题代码，重新编译执行，可以看到这一次，程序的 GC 频度要低很多，以至于短时间内都看不到 GC 日志了：</p> <p><img src="/actual_1_pprof.assets/pprof_15.drawio.png" alt="image"></p> <h2 id="排查协程泄露"><a href="#排查协程泄露" class="header-anchor">#</a> 排查协程泄露</h2> <p>由于 golang 自带内存回收，所以一般不会发生内存泄露。但凡事都有例外，在 golang 中，协程本身是可能泄露的，或者叫协程失控，进而导致内存泄露。</p> <p>我们在浏览器里可以看到，此时程序的协程数已经多达 106 条：</p> <p><img src="/actual_1_pprof.assets/pprof_16.drawio.png" alt=""></p> <p>虽然 106 条并不算多，但对于这样一个小程序来说，似乎还是不正常的。为求安心，我们再次是用 pprof 来排查一下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>go tool pprof http://localhost:6060/debug/pprof/goroutine
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>同样是 top、list、web 大法：</p> <p><img src="/actual_1_pprof.assets/pprof_17.drawio.png" alt=""></p> <p><img src="/actual_1_pprof.assets/pprof_18.drawio.png" alt=""></p> <p>可能这次问题藏得比较隐晦，但仔细观察还是不难发现，问题在于 <code>github.com/wolfogre/go-pprof-practice/animal/canidae/wolf.(*Wolf).Drink</code> 在不停地创建没有实际作用的协程：</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>w <span class="token operator">*</span>Wolf<span class="token punctuation">)</span> <span class="token function">Drink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>w<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;drink&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>可以看到，Drink 函数每次会释放 10 个协程出去，每个协程会睡眠 30 秒再退出，而 Drink 函数又会被反复调用，这才导致大量协程泄露，试想一下，如果释放出的协程会永久阻塞，那么泄露的协程数便会持续增加，内存的占用也会持续增加，那迟早是会被操作系统杀死的。</p> <p>我们注释掉问题代码，重新编译运行可以看到，协程数已经降到 4 条了：</p> <p><img src="/actual_1_pprof.assets/pprof_19.drawio.png" alt=""></p> <h2 id="排查锁的争用"><a href="#排查锁的争用" class="header-anchor">#</a> 排查锁的争用</h2> <p>到目前为止，我们已经解决这个炸弹程序的所有资源占用问题，但是事情还没有完，我们需要进一步排查那些会导致程序运行慢的性能问题，这些问题可能并不会导致资源占用，但会让程序效率低下，这同样是高性能程序所忌讳的。</p> <p>我们首先想到的就是程序中是否有不合理的锁的争用，我们倒一倒，回头看看上一张图，虽然协程数已经降到 4 条，但还显示有一个 mutex 存在争用问题。</p> <p>相信到这里，你已经触类旁通了，无需多言，开整。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>go tool pprof http://localhost:6060/debug/pprof/mutex
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>同样是 top、list、web 大法：</p> <p><img src="/actual_1_pprof.assets/pprof_20.drawio.png" alt=""></p> <p><img src="/actual_1_pprof.assets/pprof_21.drawio.png" alt=""></p> <p>可以看出来这问题出在 <code>github.com/wolfogre/go-pprof-practice/animal/canidae/wolf.(*Wolf).Howl</code>。但要知道，在代码中使用锁是无可非议的，并不是所有的锁都会被标记有问题，我们看看这个有问题的锁那儿触雷了。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>w <span class="token operator">*</span>Wolf<span class="token punctuation">)</span> <span class="token function">Howl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>w<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;howl&quot;</span><span class="token punctuation">)</span>

	m <span class="token operator">:=</span> <span class="token operator">&amp;</span>sync<span class="token punctuation">.</span>Mutex<span class="token punctuation">{</span><span class="token punctuation">}</span>
	m<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
		m<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	m<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>可以看到，这个锁由主协程 Lock，并启动子协程去 Unlock，主协程会阻塞在第二次 Lock 这儿等待子协程完成任务，但由于子协程足足睡眠了一秒，导致主协程等待这个锁释放足足等了一秒钟。虽然这可能是实际的业务需要，逻辑上说得通，并不一定真的是性能瓶颈，但既然它出现在我写的“炸弹”里，就肯定不是什么“业务需要”啦。</p> <p>所以，我们注释掉这段问题代码，重新编译执行，继续。</p> <h2 id="排查阻塞操作"><a href="#排查阻塞操作" class="header-anchor">#</a> 排查阻塞操作</h2> <p>好了，我们开始排查最后一个问题。</p> <p>在程序中，除了锁的争用会导致阻塞之外，很多逻辑都会导致阻塞。</p> <p><img src="/actual_1_pprof.assets/pprof_22.drawio.png" alt=""></p> <p>可以看到，这里仍有 2 个阻塞操作，虽然不一定是有问题的，但我们保证程序性能，我们还是要老老实实排查确认一下才对。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>go tool pprof http://localhost:6060/debug/pprof/block
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>top、list、web，你懂得。</p> <p><img src="/actual_1_pprof.assets/pprof_23.drawio.png" alt=""></p> <p><img src="/actual_1_pprof.assets/pprof_24.drawio.png" alt=""></p> <p>可以看到，阻塞操作位于 <code>github.com/wolfogre/go-pprof-practice/animal/felidae/cat.(*Cat).Pee</code>：</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Cat<span class="token punctuation">)</span> <span class="token function">Pee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;pee&quot;</span><span class="token punctuation">)</span>

	<span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>你应该可以看懂，不同于睡眠一秒，这里是从一个 channel 里读数据时，发生了阻塞，直到这个 channel 在一秒后才有数据读出，这就导致程序阻塞了一秒而非睡眠了一秒。</p> <p>这里有个疑点，就是上文中是可以看到有两个阻塞操作的，但这里只排查出了一个，我没有找到其准确原因，但怀疑另一个阻塞操作是程序监听端口提供 porof 查询时，涉及到 IO 操作发生了阻塞，即阻塞在对 HTTP 端口的监听上，但我没有进一步考证。</p> <p>不管怎样，恭喜你完整地完成了这个实验。</p> <h2 id="思考题"><a href="#思考题" class="header-anchor">#</a> 思考题</h2> <p>另有一些问题，虽然比较重要，但碍于篇幅（其实是我偷懒），就以思考题的形式留给大家了。</p> <ol><li>每次进入交互式终端，都会提示“type ‘help’ for commands, ‘o’ for options”，你有尝试过查看有哪些命令和哪些选项吗？有重点了解一下“sample_index”这个选项吗？</li> <li>关于内存的指标，有申请对象数、使用对象数、申请空间大小、使用空间大小，本文用的是什么指标？如何查看不同的指标？（提示：在内存实验中，试试查看、修改“sample_index”选项。）</li> <li>你有听说过火焰图吗？要不要在试验中生成一下火焰图？</li> <li>main 函数中的 <code>runtime.SetMutexProfileFraction</code> 和 <code>runtime.SetBlockProfileRate</code> 是如何影响指标采样的？它们的参数的含义是什么？</li> <li>评论区有很多很有价值的提问，你有注意到吗？</li></ol> <h2 id="最后"><a href="#最后" class="header-anchor">#</a> 最后</h2> <p>碍于我的水平有限，实验中还有很多奇怪的细节我只能暂时熟视无睹（比如“排查内存占用过高”一节中，为什么实际申请的是 1.5 GiB 内存），如果这些奇怪的细节你也发现了，并痛斥我假装睁眼瞎，那么我的目的就达到了……</p> <p>——还记得吗，本文的目的是让你熟悉使用 pprof，消除对它的陌生感，并能借用它进一步得了解 golang。而你通过这次试验，发现了程序的很多行为不同于你以往的认知或假设，并抱着好奇心，开始向比深处更深处迈进，那么，我何尝不觉得这是本文的功德呢？</p> <p>与君共勉。</p> <h2 id="相关链接"><a href="#相关链接" class="header-anchor">#</a> 相关链接</h2> <ul><li><a href="https://blog.wolfogre.com/posts/go-ppof-practice/" target="_blank" rel="noopener noreferrer">原文链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://golang2.eddycjy.com/posts/ch6/01-pprof-1/" target="_blank" rel="noopener noreferrer">其他性能剖析文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">7/26/2023,</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/golang/4_3_golang_test_eample.html" class="prev">
          实践&amp;建议
        </a></span> <span class="next"><a href="/golang/actual_2_pro_problem.html">
          问题定位
        </a>
        →
      </span></p></div> </main></div> <aside class="page-sidebar"> <div class="page-side-toolbar"><div class="option-box-toc-fixed"><div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:650px"><div style="font-weight:bold;text-align:center;">pprof 实践</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/golang/actual_1_pprof.html#前言" class="toc-sidebar-link">前言</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#实验准备" class="toc-sidebar-link">实验准备</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#获取-炸弹" class="toc-sidebar-link">获取“炸弹”</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#使用-pprof" class="toc-sidebar-link">使用 pprof</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#排查-cpu-占用过高" class="toc-sidebar-link">排查 CPU 占用过高</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#排查内存占用过高" class="toc-sidebar-link">排查内存占用过高</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#排查频繁内存回收" class="toc-sidebar-link">排查频繁内存回收</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#排查协程泄露" class="toc-sidebar-link">排查协程泄露</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#排查锁的争用" class="toc-sidebar-link">排查锁的争用</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#排查阻塞操作" class="toc-sidebar-link">排查阻塞操作</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#思考题" class="toc-sidebar-link">思考题</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#最后" class="toc-sidebar-link">最后</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#相关链接" class="toc-sidebar-link">相关链接</a><ul class="toc-sidebar-sub-headers"></ul></li></ul></div></div></div></div></div> <div class="option-box-toc-over"><img src="/images/system/toc.png" class="nozoom"> <span class="show-txt">目录</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:550px"><div style="font-weight:bold;text-align:center;">pprof 实践</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/golang/actual_1_pprof.html#前言" class="toc-sidebar-link">前言</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#实验准备" class="toc-sidebar-link">实验准备</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#获取-炸弹" class="toc-sidebar-link">获取“炸弹”</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#使用-pprof" class="toc-sidebar-link">使用 pprof</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#排查-cpu-占用过高" class="toc-sidebar-link">排查 CPU 占用过高</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#排查内存占用过高" class="toc-sidebar-link">排查内存占用过高</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#排查频繁内存回收" class="toc-sidebar-link">排查频繁内存回收</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#排查协程泄露" class="toc-sidebar-link">排查协程泄露</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#排查锁的争用" class="toc-sidebar-link">排查锁的争用</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#排查阻塞操作" class="toc-sidebar-link">排查阻塞操作</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#思考题" class="toc-sidebar-link">思考题</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#最后" class="toc-sidebar-link">最后</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/golang/actual_1_pprof.html#相关链接" class="toc-sidebar-link">相关链接</a><ul class="toc-sidebar-sub-headers"></ul></li></ul></div></div></div></div></div> <div class="option-box"><img src="/pagesidebar/phone.png" class="nozoom"> <span class="show-txt">手机看</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.9rem">微信扫一扫</span> <img height="180px" src="https://api.qrserver.com/v1/create-qr-code/?data=https://muxicode.github.io/golang/actual_1_pprof.html" style="margin:10px;">
            可以<b>手机看</b>或分享至<b>朋友圈</b></div></div></div></div> <div class="option-box"><img src="/pagesidebar/sidebar.png" width="30px" class="nozoom"> <span class="show-txt">左栏</span></div> <div class="option-box"><img src="/pagesidebar/wechat.png" width="25px" class="nozoom"> <span class="show-txt">技术群</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.8rem;font-weight:bold;">添加慕溪微信<span style="color:red;">(hacker_binghe)</span>进慕溪技术学习交流圈「无任何套路」</span> <img src="/pagesidebar/muxi.jpg" height="180px" style="margin:10px;">
            PS：添加时请备注<b>读者加群</b>，谢谢！
          </div></div></div></div> <div class="option-box"><img src="/pagesidebar/baiduwangpan.png" width="25px" class="nozoom"> <span class="show-txt">下资料</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.8rem;font-weight:bold;">扫描二维码，回复<span style="color:red;">“领取加群资料”</span>下载<span style="color:red;">两门优质视频资源</span></span> <img src="/pagesidebar/gongzonghao.jpg" height="180px" style="margin:10px;"> <b>公众号:</b> 慕溪code
          </div></div></div></div> <div class="option-box"><img src="/pagesidebar/support.png" width="25px" class="nozoom"> <span class="show-txt">赞赏我</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="text-align:center"><span style="font-size:0.8rem;font-weight:bold;">鼓励/支持/赞赏我</span> <img height="180px" src="/pagesidebar/zanshang.jpg" style="margin:5px;"> <br>1. 不靠它生存但仍希望得到你的鼓励；
            <br>2. 时刻警醒自己保持技术人的初心；
          </div></div></div></div> <div title="实践&amp;建议" class="option-box" style="padding-left:2px;text-align:center;"><a href="/golang/4_3_golang_test_eample.html"><img src="/pagesidebar/pre.png" width="30px" class="nozoom"> <span class="show-txt">上一篇</span></a></div> <div title="问题定位" class="option-box" style="padding-left:2px;text-align:center;"><a href="/golang/actual_2_pro_problem.html"><img src="/pagesidebar/next.png" width="30px" class="nozoom"> <span class="show-txt">下一篇</span></a></div></div>  <!----> </aside></div><div class="global-ui"><LockArticle></LockArticle><PayArticle></PayArticle></div></div>
    <script src="/assets/js/app.14af41b6.js" defer></script><script src="/assets/js/3.a6764047.js" defer></script><script src="/assets/js/4.940cf505.js" defer></script><script src="/assets/js/131.5c8a529a.js" defer></script>
  </body>
</html>
