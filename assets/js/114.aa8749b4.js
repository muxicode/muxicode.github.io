(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{399:function(s,t,n){"use strict";n.r(t);var a=n(14),e=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"goæµ‹è¯•ç›¸å…³"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#goæµ‹è¯•ç›¸å…³"}},[s._v("#")]),s._v(" Goæµ‹è¯•ç›¸å…³")]),s._v(" "),t("p",[s._v("ğŸ‘‰ä½ æ˜¯ä¸æ˜¯ä¹Ÿé‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼šä½ æƒ³è¦ç»™"),t("code",[s._v("golang")]),s._v("çš„ä»£ç å†™æµ‹è¯•ç”¨ä¾‹ï¼Œä½†æ˜¯ä½ çš„ä»£ç é‡Œé¢æœ‰ä¸€ä¸ªå¯¹è±¡ä¾èµ–äº†å¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œé‚£ä¸ªå¯¹è±¡çš„è¡Œä¸ºåˆå¤ªå¤æ‚ï¼Œä½ åªæƒ³æµ‹è¯•å…¶ä¸­çš„ä¸€éƒ¨åˆ†é€»è¾‘ï¼Œæ€ä¹ˆåŠå‘¢ï¼ŸğŸ˜­")]),s._v(" "),t("p",[s._v("ğŸ‘‰åˆ«æ‹…å¿ƒï¼Œä»Šå¤©æˆ‘å°±æ¥æ•™ä½ ä¸‰ç§ç®€å•æœ‰æ•ˆçš„æ–¹æ³•ï¼Œè®©ä½ è½»æ¾å†™å‡ºé«˜è´¨é‡çš„æµ‹è¯•ç”¨ä¾‹ï¼Œè®©ä½ çš„ä»£ç æ›´å¥å£®ã€æ›´å¯é ï¼ğŸ˜Š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("ğŸ‘‰æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ¥å£å’Œæ¨¡æ‹Ÿã€‚å¦‚æœè¢«ä¾èµ–çš„å¯¹è±¡å®ç°äº†æŸä¸ªæ¥å£ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿçš„å¯¹è±¡ï¼Œå®ç°åŒæ ·çš„æ¥å£ï¼Œå¹¶ä¸”åªå®šä¹‰ä½ éœ€è¦è§¦å‘çš„é€»è¾‘ã€‚ç„¶åæŠŠæ¨¡æ‹Ÿçš„å¯¹è±¡ä½œä¸ºå‚æ•°æˆ–è€…å­—æ®µä¼ é€’ç»™ä¾èµ–çš„å¯¹è±¡ï¼Œæ›¿æ¢æ‰åŸæ¥çš„å¯¹è±¡ã€‚è¿™æ ·ä½ å°±å¯ä»¥æ§åˆ¶è¢«ä¾èµ–å¯¹è±¡çš„è¡Œä¸ºï¼Œåªæµ‹è¯•ä½ å…³å¿ƒçš„éƒ¨åˆ†ã€‚ğŸ‘")])]),s._v(" "),t("li",[t("p",[s._v("ğŸ‘‰æ–¹æ³•äºŒï¼šä½¿ç”¨å‡½æ•°ç±»å‹å’Œé—­åŒ…ã€‚å¦‚æœè¢«ä¾èµ–çš„å¯¹è±¡æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­å®šä¹‰ä¸€ä¸ªé—­åŒ…å‡½æ•°ï¼ŒåªåŒ…å«ä½ éœ€è¦è§¦å‘çš„é€»è¾‘ã€‚ç„¶åæŠŠé—­åŒ…å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è€…å­—æ®µä¼ é€’ç»™ä¾èµ–çš„å¯¹è±¡ï¼Œæ›¿æ¢æ‰åŸæ¥çš„å‡½æ•°ã€‚è¿™æ ·ä½ ä¹Ÿå¯ä»¥æ§åˆ¶è¢«ä¾èµ–å¯¹è±¡çš„è¡Œä¸ºï¼Œåªæµ‹è¯•ä½ å…³å¿ƒçš„éƒ¨åˆ†ã€‚ğŸ‘")])]),s._v(" "),t("li",[t("p",[s._v("ğŸ‘‰æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å’Œåå°„ã€‚å¦‚æœè¢«ä¾èµ–çš„å¯¹è±¡æ˜¯ä¸€ä¸ªç§æœ‰çš„å˜é‡æˆ–è€…æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹åº“ï¼Œä¾‹å¦‚monkeyæˆ–testify/mockï¼Œæ¥ä¿®æ”¹æˆ–è€…è¦†ç›–å®ƒä»¬çš„å€¼æˆ–è€…è¡Œä¸ºã€‚è¿™ç§æ–¹æ³•éœ€è¦ä½¿ç”¨åå°„æŠ€æœ¯ï¼Œå¯èƒ½ä¼šå½±å“æ€§èƒ½å’Œå®‰å…¨æ€§ï¼Œæ‰€ä»¥è¦è°¨æ…ä½¿ç”¨ã€‚ğŸ‘")])])]),s._v(" "),t("h2",{attrs:{id:"å‡½æ•°ç±»å‹å’Œé—­åŒ…"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‡½æ•°ç±»å‹å’Œé—­åŒ…"}},[s._v("#")]),s._v(" å‡½æ•°ç±»å‹å’Œé—­åŒ…")]),s._v(" "),t("p",[s._v("ğŸ‘‰"),t("code",[s._v("golang")]),s._v("ä¸­ä½¿ç”¨å‡½æ•°ç±»å‹å’Œé—­åŒ…çš„ä¸€ä¸ªä¾‹å­æ˜¯ï¼š")]),s._v(" "),t("p",[s._v("ğŸ‘‰é¦–å…ˆï¼Œæˆ‘ä»¬è¦çŸ¥é“ä»€ä¹ˆæ˜¯å‡½æ•°ç±»å‹å’Œé—­åŒ…ã€‚å‡½æ•°ç±»å‹å°±æ˜¯æŠŠå‡½æ•°å½“ä½œä¸€ç§ç±»å‹ï¼Œå¯ä»¥èµ‹å€¼ç»™å˜é‡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°æˆ–è€…è¿”å›å€¼ã€‚é—­åŒ…å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥å¼•ç”¨å®ƒå¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½ã€‚ğŸ‘")]),s._v(" "),t("p",[s._v("ğŸ‘‰ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ç±»å‹"),t("code",[s._v("Adder")]),s._v("ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå¯ä»¥æ¥å—ä¸€ä¸ªæ•´æ•°å¹¶è¿”å›ä¸€ä¸ªæ•´æ•°çš„å‡½æ•°ã€‚")]),s._v(" "),t("li",[s._v("å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°"),t("code",[s._v("MakeAdder")]),s._v("ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•´æ•°xï¼Œå¹¶è¿”å›ä¸€ä¸ª"),t("code",[s._v("Adder")]),s._v("ç±»å‹çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥å°†è¾“å…¥çš„æ•´æ•°åŠ ä¸Š"),t("code",[s._v("x")]),s._v("ã€‚è¿™ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œå› ä¸ºå®ƒå¼•ç”¨äº†å¤–éƒ¨çš„å˜é‡xã€‚")]),s._v(" "),t("li",[s._v("å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°"),t("code",[s._v("Sum")]),s._v("ï¼Œå®ƒæ¥å—ä¸€ä¸ª"),t("code",[s._v("Adder")]),s._v("ç±»å‹çš„å‡½æ•°å’Œä¸€ä¸ªæ•´æ•°åˆ‡ç‰‡ï¼Œç„¶åå¯¹åˆ‡ç‰‡ä¸­çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨è¯¥å‡½æ•°ï¼Œå¹¶è¿”å›ç»“æœçš„æ€»å’Œã€‚")])]),s._v(" "),t("p",[s._v("ğŸ‘‰ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä¸€ä¸ªå‡½æ•°ç±»å‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" Adder "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä¸€ä¸ªè¿”å›é—­åŒ…çš„å‡½æ•°")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("MakeAdder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Adder "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" x "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" y\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä¸€ä¸ªæ¥å—é—­åŒ…ä½œä¸ºå‚æ•°çš„å‡½æ•°")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sum")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("f Adder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nums "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  sum "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("_")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("range")]),s._v(" nums "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    sum "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("f")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" sum\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨é—­åŒ…")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("TestSum")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("testing"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("T"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºä¸€ä¸ªé—­åŒ…ï¼Œå°†è¾“å…¥åŠ ä¸Š10")]),s._v("\n  add10 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("MakeAdder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ•°æ®")]),s._v("\n  nums "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨Sumå‡½æ•°ï¼Œå¹¶ä¼ å…¥é—­åŒ…å’Œæµ‹è¯•æ•°æ®")]),s._v("\n  result "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sum")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("add10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nums"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// éªŒè¯ç»“æœæ˜¯å¦æ­£ç¡®")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" result "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Errorf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Expected 65, got %d"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br")])]),t("h2",{attrs:{id:"æ¥å£å’Œæ¨¡æ‹Ÿ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¥å£å’Œæ¨¡æ‹Ÿ"}},[s._v("#")]),s._v(" æ¥å£å’Œæ¨¡æ‹Ÿ")]),s._v(" "),t("p",[s._v("ğŸ‘‰"),t("code",[s._v("golang")]),s._v("ä¸­ä½¿ç”¨æ¥å£å’Œæ¨¡æ‹Ÿçš„ä¸€ä¸ªä¾‹å­æ˜¯ï¼š")]),s._v(" "),t("p",[s._v("ğŸ‘‰é¦–å…ˆï¼Œæˆ‘ä»¬è¦çŸ¥é“ä»€ä¹ˆæ˜¯æ¥å£å’Œæ¨¡æ‹Ÿã€‚æ¥å£å°±æ˜¯ä¸€ç§æŠ½è±¡çš„ç±»å‹ï¼Œå®ƒå®šä¹‰äº†ä¸€ç»„æ–¹æ³•ï¼Œä½†æ˜¯ä¸æŒ‡å®šå…·ä½“çš„å®ç°ã€‚æ¨¡æ‹Ÿå°±æ˜¯ä¸€ç§å®ç°äº†æ¥å£çš„ç±»å‹ï¼Œå®ƒå¯ä»¥æ¨¡ä»¿çœŸå®çš„å¯¹è±¡çš„è¡Œä¸ºï¼Œä½†æ˜¯å¯ä»¥è‡ªå®šä¹‰ä¸€äº›é€»è¾‘ï¼Œæ–¹ä¾¿æµ‹è¯•ã€‚ğŸ‘")]),s._v(" "),t("p",[s._v("ğŸ‘‰ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¥å£"),t("code",[s._v("Downloader")]),s._v("ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå¯ä»¥ä¸‹è½½æ–‡ä»¶çš„å¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ª"),t("code",[s._v("Download")]),s._v("æ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ªæ–‡ä»¶åï¼Œå¹¶è¿”å›æ–‡ä»¶çš„å¤§å°ã€‚")]),s._v(" "),t("li",[s._v("å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°"),t("code",[s._v("DownloadFile")]),s._v("ï¼Œå®ƒæ¥å—ä¸€ä¸ª"),t("code",[s._v("Downloader")]),s._v("ç±»å‹çš„å¯¹è±¡å’Œä¸€ä¸ªæ–‡ä»¶åï¼Œç„¶åè°ƒç”¨è¯¥å¯¹è±¡çš„"),t("code",[s._v("Download")]),s._v("æ–¹æ³•æ¥ä¸‹è½½æ–‡ä»¶ï¼Œå¹¶è¿”å›æ–‡ä»¶çš„å¤§å°ã€‚")]),s._v(" "),t("li",[s._v("å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç»“æ„ä½“"),t("code",[s._v("HTTPDownloader")]),s._v("ï¼Œå®ƒå®ç°äº†"),t("code",[s._v("Downloader")]),s._v("æ¥å£ï¼Œå¹¶ä¸”ä½¿ç”¨"),t("code",[s._v("http.Get")]),s._v("æ–¹æ³•æ¥ä¸‹è½½æ–‡ä»¶ã€‚")]),s._v(" "),t("li",[s._v("å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç»“æ„ä½“"),t("code",[s._v("MockDownloader")]),s._v("ï¼Œå®ƒä¹Ÿå®ç°äº†"),t("code",[s._v("Downloader")]),s._v("æ¥å£ï¼Œå¹¶ä¸”åªè¿”å›ä¸€ä¸ªå›ºå®šçš„æ–‡ä»¶å¤§å°ã€‚")])]),s._v(" "),t("p",[s._v("ğŸ‘‰ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä¸€ä¸ªæ¥å£")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" Downloader "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Download")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªæ¥å£ç±»å‹çš„å‚æ•°")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("DownloadFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("d Downloader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filename "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Download")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filename"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œå®ç°æ¥å£")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" HTTPDownloader "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("h "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("HTTPDownloader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Download")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filename "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  resp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filename"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" err "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("defer")]),s._v(" resp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Body"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Close")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" ioutil"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ReadAll")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("resp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Body"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" err "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("len")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰å¦ä¸€ä¸ªç»“æ„ä½“ï¼Œæ¨¡æ‹Ÿæ¥å£")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" MockDownloader "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("MockDownloader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Download")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filename "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ¨¡æ‹Ÿè¿”å›1000å­—èŠ‚")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨æ¨¡æ‹Ÿ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("TestDownloadFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("testing"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("T"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿå¯¹è±¡")]),s._v("\n  mock "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("MockDownloader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨DownloadFileå‡½æ•°ï¼Œå¹¶ä¼ å…¥æ¨¡æ‹Ÿå¯¹è±¡å’Œæµ‹è¯•æ•°æ®")]),s._v("\n  size"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("DownloadFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test.txt"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// éªŒè¯ç»“æœæ˜¯å¦æ­£ç¡®")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" err "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Errorf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Unexpected error: %v"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Errorf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Expected size: %d, got: %d"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" size"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br")])]),t("h2",{attrs:{id:"ç¬¬ä¸‰æ–¹åº“å’Œåå°„"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸‰æ–¹åº“å’Œåå°„"}},[s._v("#")]),s._v(" ç¬¬ä¸‰æ–¹åº“å’Œåå°„")]),s._v(" "),t("p",[s._v("ğŸ‘‰"),t("code",[s._v("golang")]),s._v("ä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å’Œåå°„çš„ä¸€ä¸ªä¾‹å­æ˜¯ï¼š")]),s._v(" "),t("p",[s._v("ğŸ‘‰é¦–å…ˆï¼Œæˆ‘ä»¬è¦çŸ¥é“ä»€ä¹ˆæ˜¯ç¬¬ä¸‰æ–¹åº“å’Œåå°„ã€‚ç¬¬ä¸‰æ–¹åº“å°±æ˜¯ä¸€äº›å…¶ä»–å¼€å‘è€…ç¼–å†™çš„ä»£ç åŒ…ï¼Œå¯ä»¥æä¾›ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬çš„å¼€å‘æ›´æ–¹ä¾¿ã€‚åå°„å°±æ˜¯ä¸€ç§åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–æˆ–ä¿®æ”¹å¯¹è±¡çš„ç±»å‹ã€å€¼ã€æ–¹æ³•ç­‰ä¿¡æ¯çš„æŠ€æœ¯ã€‚ğŸ‘")]),s._v(" "),t("p",[s._v("ğŸ‘‰ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç»“æ„ä½“"),t("code",[s._v("Foo")]),s._v("ï¼Œå®ƒæœ‰ä¸€ä¸ªç§æœ‰çš„æ–¹æ³•barï¼Œè¡¨ç¤ºæ‰“å°ä¸€äº›ä¿¡æ¯ã€‚")]),s._v(" "),t("li",[s._v("å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°"),t("code",[s._v("TestFooBar")]),s._v("ï¼Œå®ƒæƒ³è¦æµ‹è¯•"),t("code",[s._v("Foo")]),s._v("çš„"),t("code",[s._v("bar")]),s._v("æ–¹æ³•ï¼Œä½†æ˜¯æ— æ³•ç›´æ¥è°ƒç”¨å®ƒï¼Œå› ä¸ºå®ƒæ˜¯ç§æœ‰çš„ã€‚")]),s._v(" "),t("li",[s._v("ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“"),t("code",[s._v("bouk/monkey")]),s._v("ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶ä¿®æ”¹æˆ–è€…è¦†ç›–ç§æœ‰æ–¹æ³•çš„è¡Œä¸ºï¼Œä½¿å¾—å¯ä»¥è°ƒç”¨å®ƒæˆ–è€…æ£€æŸ¥å®ƒçš„è¾“å‡ºã€‚")])]),s._v(" "),t("p",[s._v("ğŸ‘‰ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä¸€ä¸ªç»“æ„ä½“")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" Foo "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä¸€ä¸ªç§æœ‰çš„æ–¹æ³•")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("f "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Foo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  fmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello from bar"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("TestFooBar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("testing"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("T"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºä¸€ä¸ªFooå¯¹è±¡")]),s._v("\n  f "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("Foo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½¿ç”¨monkeyåº“æ¥è¦†ç›–baræ–¹æ³•")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" output "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v("\n  monkey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("PatchInstanceMethod")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("reflect"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("TypeOf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("f"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bar"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("_")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("Foo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    output "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello from mock"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨baræ–¹æ³•")]),s._v("\n  f"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// éªŒè¯è¾“å‡ºæ˜¯å¦æ­£ç¡®")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" output "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello from mock"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Errorf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Expected: %s, got: %s"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello from mock"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" output"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);